{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar react_1 = require(\"react\");\n\nvar field_1 = require(\"../field\");\n\nvar utilities_1 = require(\"../../utilities\");\n\nfunction reinitializeAction(list) {\n  return {\n    type: 'reinitialize',\n    payload: {\n      list: list\n    }\n  };\n}\n\nexports.reinitializeAction = reinitializeAction;\n\nfunction addFieldsAction(list) {\n  return {\n    type: 'addFields',\n    payload: {\n      list: list\n    }\n  };\n}\n\nexports.addFieldsAction = addFieldsAction;\n\nfunction removeFieldsAction(indexToRemove) {\n  return {\n    type: 'removeFields',\n    payload: {\n      indexToRemove: indexToRemove\n    }\n  };\n}\n\nexports.removeFieldsAction = removeFieldsAction;\n\nfunction updateAction(payload) {\n  return {\n    type: 'update',\n    payload: payload\n  };\n}\n\nexports.updateAction = updateAction;\n\nfunction resetAction(payload) {\n  return {\n    type: 'reset',\n    payload: payload\n  };\n}\n\nexports.resetAction = resetAction;\n\nfunction newDefaultAction(payload) {\n  return {\n    type: 'newDefaultValue',\n    payload: payload\n  };\n}\n\nexports.newDefaultAction = newDefaultAction;\n\nfunction updateErrorAction(payload) {\n  return {\n    type: 'updateError',\n    payload: payload\n  };\n}\n\nexports.updateErrorAction = updateErrorAction;\n\nfunction useListReducer(initial) {\n  return react_1.useReducer(reduceList, {\n    list: initial.map(initialListItemState),\n    initial: initial\n  });\n}\n\nexports.useListReducer = useListReducer;\n\nfunction reduceList(state, action) {\n  switch (action.type) {\n    case 'reinitialize':\n      {\n        return {\n          initial: action.payload.list,\n          list: action.payload.list.map(initialListItemState)\n        };\n      }\n\n    case 'addFields':\n      {\n        return tslib_1.__assign(tslib_1.__assign({}, state), {\n          list: tslib_1.__spread(state.list, action.payload.list.map(initialListItemState))\n        });\n      }\n\n    case 'removeFields':\n      {\n        var newList = tslib_1.__spread(state.list);\n\n        newList.splice(action.payload.indexToRemove, 1);\n        return tslib_1.__assign(tslib_1.__assign({}, state), {\n          list: newList\n        });\n      }\n\n    case 'updateError':\n      {\n        var _a = action.payload,\n            target = _a.target,\n            error = _a.error;\n        var index = target.index,\n            key = target.key;\n        var currentItem = state.list[index];\n        currentItem[key] = field_1.reduceField(currentItem[key], field_1.updateErrorAction(error));\n        return tslib_1.__assign(tslib_1.__assign({}, state), {\n          list: tslib_1.__spread(state.list)\n        });\n      }\n\n    case 'reset':\n      {\n        var target = action.payload.target;\n        var index = target.index,\n            key = target.key;\n        var currentItem = state.list[index];\n        currentItem[key] = field_1.reduceField(currentItem[key], {\n          type: 'reset'\n        });\n        return tslib_1.__assign(tslib_1.__assign({}, state), {\n          list: tslib_1.__spread(state.list)\n        });\n      }\n\n    case 'update':\n    case 'newDefaultValue':\n      {\n        var _b = action.payload,\n            target = _b.target,\n            value = _b.value;\n        var index = target.index,\n            key = target.key;\n        var currentItem = state.list[index];\n        currentItem[key] = field_1.reduceField(currentItem[key], {\n          type: action.type,\n          payload: value\n        });\n        return tslib_1.__assign(tslib_1.__assign({}, state), {\n          list: tslib_1.__spread(state.list)\n        });\n      }\n  }\n}\n\nfunction initialListItemState(item) {\n  return utilities_1.mapObject(item, field_1.initialFieldState);\n}","map":{"version":3,"sources":["/Users/timi/Desktop/typescript-test/node_modules/@shopify/react-form/dist/src/hooks/list/reducer.js"],"names":["Object","defineProperty","exports","value","tslib_1","require","react_1","field_1","utilities_1","reinitializeAction","list","type","payload","addFieldsAction","removeFieldsAction","indexToRemove","updateAction","resetAction","newDefaultAction","updateErrorAction","useListReducer","initial","useReducer","reduceList","map","initialListItemState","state","action","__assign","__spread","newList","splice","_a","target","error","index","key","currentItem","reduceField","_b","item","mapObject","initialFieldState"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar react_1 = require(\"react\");\nvar field_1 = require(\"../field\");\nvar utilities_1 = require(\"../../utilities\");\nfunction reinitializeAction(list) {\n    return {\n        type: 'reinitialize',\n        payload: { list: list },\n    };\n}\nexports.reinitializeAction = reinitializeAction;\nfunction addFieldsAction(list) {\n    return {\n        type: 'addFields',\n        payload: { list: list },\n    };\n}\nexports.addFieldsAction = addFieldsAction;\nfunction removeFieldsAction(indexToRemove) {\n    return {\n        type: 'removeFields',\n        payload: { indexToRemove: indexToRemove },\n    };\n}\nexports.removeFieldsAction = removeFieldsAction;\nfunction updateAction(payload) {\n    return {\n        type: 'update',\n        payload: payload,\n    };\n}\nexports.updateAction = updateAction;\nfunction resetAction(payload) {\n    return {\n        type: 'reset',\n        payload: payload,\n    };\n}\nexports.resetAction = resetAction;\nfunction newDefaultAction(payload) {\n    return {\n        type: 'newDefaultValue',\n        payload: payload,\n    };\n}\nexports.newDefaultAction = newDefaultAction;\nfunction updateErrorAction(payload) {\n    return {\n        type: 'updateError',\n        payload: payload,\n    };\n}\nexports.updateErrorAction = updateErrorAction;\nfunction useListReducer(initial) {\n    return react_1.useReducer(reduceList, {\n        list: initial.map(initialListItemState),\n        initial: initial,\n    });\n}\nexports.useListReducer = useListReducer;\nfunction reduceList(state, action) {\n    switch (action.type) {\n        case 'reinitialize': {\n            return {\n                initial: action.payload.list,\n                list: action.payload.list.map(initialListItemState),\n            };\n        }\n        case 'addFields': {\n            return tslib_1.__assign(tslib_1.__assign({}, state), { list: tslib_1.__spread(state.list, action.payload.list.map(initialListItemState)) });\n        }\n        case 'removeFields': {\n            var newList = tslib_1.__spread(state.list);\n            newList.splice(action.payload.indexToRemove, 1);\n            return tslib_1.__assign(tslib_1.__assign({}, state), { list: newList });\n        }\n        case 'updateError': {\n            var _a = action.payload, target = _a.target, error = _a.error;\n            var index = target.index, key = target.key;\n            var currentItem = state.list[index];\n            currentItem[key] = field_1.reduceField(currentItem[key], field_1.updateErrorAction(error));\n            return tslib_1.__assign(tslib_1.__assign({}, state), { list: tslib_1.__spread(state.list) });\n        }\n        case 'reset': {\n            var target = action.payload.target;\n            var index = target.index, key = target.key;\n            var currentItem = state.list[index];\n            currentItem[key] = field_1.reduceField(currentItem[key], { type: 'reset' });\n            return tslib_1.__assign(tslib_1.__assign({}, state), { list: tslib_1.__spread(state.list) });\n        }\n        case 'update':\n        case 'newDefaultValue': {\n            var _b = action.payload, target = _b.target, value = _b.value;\n            var index = target.index, key = target.key;\n            var currentItem = state.list[index];\n            currentItem[key] = field_1.reduceField(currentItem[key], {\n                type: action.type,\n                payload: value,\n            });\n            return tslib_1.__assign(tslib_1.__assign({}, state), { list: tslib_1.__spread(state.list) });\n        }\n    }\n}\nfunction initialListItemState(item) {\n    return utilities_1.mapObject(item, field_1.initialFieldState);\n}\n"]},"metadata":{},"sourceType":"script"}