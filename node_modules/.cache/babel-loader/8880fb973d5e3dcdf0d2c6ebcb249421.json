{"ast":null,"code":"import React$1, { Component, createRef } from 'react';\nimport { FeaturesContext } from '../../../../utilities/features/context.js';\nimport debounce$1 from 'lodash/debounce';\nimport { EventListener as EventListener$1 } from '../../../EventListener/EventListener.js';\nimport { classNames } from '../../../../utilities/css.js';\nimport { Popover as Popover$1 } from '../../../Popover/Popover.js';\nimport { Button as Button$1 } from '../../../Button/Button.js';\nimport styles from './ConnectedFilterControl.scss.js';\nimport { Item as Item$1 } from './components/Item/Item.js';\nconst FILTER_FIELD_MIN_WIDTH = 150;\n\nclass ConnectedFilterControl extends Component {\n  constructor(...args) {\n    super(...args);\n    this.context = void 0;\n    this.state = {\n      availableWidth: 0,\n      proxyButtonsWidth: {}\n    };\n    this.container = /*#__PURE__*/createRef();\n    this.proxyButtonContainer = /*#__PURE__*/createRef();\n    this.moreFiltersButtonContainer = /*#__PURE__*/createRef();\n    this.handleResize = debounce$1(() => {\n      this.measureProxyButtons();\n      this.measureAvailableWidth();\n    }, 40, {\n      leading: true,\n      trailing: true,\n      maxWait: 40\n    });\n  }\n\n  componentDidMount() {\n    this.handleResize();\n  }\n\n  render() {\n    const {\n      newDesignLanguage\n    } = this.context || {};\n    const {\n      children,\n      rightPopoverableActions,\n      rightAction,\n      auxiliary,\n      forceShowMorefiltersButton = true\n    } = this.props;\n    const actionsToRender = rightPopoverableActions != null ? this.getActionsToRender(rightPopoverableActions) : [];\n    const className = classNames(styles.ConnectedFilterControl, rightPopoverableActions && styles.right, newDesignLanguage && styles.newDesignLanguage);\n    const shouldRenderMoreFiltersButton = forceShowMorefiltersButton || rightPopoverableActions && rightPopoverableActions.length !== actionsToRender.length;\n    const RightContainerClassName = classNames(styles.RightContainer, !shouldRenderMoreFiltersButton && styles.RightContainerWithoutMoreFilters);\n    const rightMarkup = actionsToRender.length > 0 ? /*#__PURE__*/React$1.createElement(\"div\", {\n      className: RightContainerClassName\n    }, this.popoverFrom(actionsToRender)) : null;\n    const moreFiltersButtonContainerClassname = classNames(styles.MoreFiltersButtonContainer, actionsToRender.length === 0 && newDesignLanguage && styles.onlyButtonVisible);\n    const rightActionMarkup = rightAction ? /*#__PURE__*/React$1.createElement(\"div\", {\n      ref: this.moreFiltersButtonContainer,\n      className: moreFiltersButtonContainerClassname\n    }, shouldRenderMoreFiltersButton && /*#__PURE__*/React$1.createElement(Item$1, null, rightAction)) : null;\n    const proxyButtonMarkup = rightPopoverableActions ? /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.ProxyButtonContainer,\n      ref: this.proxyButtonContainer,\n      \"aria-hidden\": true\n    }, rightPopoverableActions.map(action => /*#__PURE__*/React$1.createElement(\"div\", {\n      key: action.key,\n      \"data-key\": action.key\n    }, this.activatorButtonFrom(action)))) : null;\n    const auxMarkup = auxiliary ? /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.AuxiliaryContainer\n    }, auxiliary) : null;\n    return /*#__PURE__*/React$1.createElement(React$1.Fragment, null, proxyButtonMarkup, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Wrapper\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: className,\n      ref: this.container\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.CenterContainer\n    }, /*#__PURE__*/React$1.createElement(Item$1, null, children)), rightMarkup, rightActionMarkup, /*#__PURE__*/React$1.createElement(EventListener$1, {\n      event: \"resize\",\n      handler: this.handleResize\n    })), auxMarkup));\n  }\n\n  measureProxyButtons() {\n    if (this.proxyButtonContainer.current) {\n      const proxyButtonsWidth = {}; // this number is magical, but tweaking it solved the problem of items overlapping\n\n      const tolerance = 78;\n\n      if (this.proxyButtonContainer.current) {\n        Array.from(this.proxyButtonContainer.current.children).forEach(element => {\n          const buttonWidth = element.getBoundingClientRect().width + tolerance;\n          const buttonKey = element instanceof HTMLElement && element.dataset.key;\n\n          if (buttonKey) {\n            proxyButtonsWidth[buttonKey] = buttonWidth;\n          }\n        });\n      }\n\n      this.setState({\n        proxyButtonsWidth\n      });\n    }\n  }\n\n  measureAvailableWidth() {\n    if (this.container.current && this.moreFiltersButtonContainer.current) {\n      const containerWidth = this.container.current.getBoundingClientRect().width;\n      const moreFiltersButtonWidth = this.moreFiltersButtonContainer.current.getBoundingClientRect().width;\n      const filtersActionWidth = 0;\n      const availableWidth = containerWidth - FILTER_FIELD_MIN_WIDTH - moreFiltersButtonWidth - filtersActionWidth;\n      this.setState({\n        availableWidth\n      });\n    }\n  }\n\n  getActionsToRender(actions) {\n    let remainingWidth = this.state.availableWidth;\n    const actionsToReturn = [];\n\n    for (let i = 0; remainingWidth > 0 && i < actions.length; i++) {\n      const action = actions[i];\n      const actionWidth = this.state.proxyButtonsWidth[action.key];\n\n      if (actionWidth <= remainingWidth) {\n        actionsToReturn.push(action);\n        remainingWidth -= actionWidth;\n      } else {\n        // When we can't fit an action, we break the loop.\n        // The ones that didn't fit will be accessible through the \"More filters\" button\n        break;\n      }\n    }\n\n    return actionsToReturn;\n  }\n\n  activatorButtonFrom(action) {\n    return /*#__PURE__*/React$1.createElement(Button$1, {\n      onClick: action.onAction,\n      disclosure: true,\n      disabled: this.props.disabled || action.disabled,\n      id: `Activator-${action.key}`\n    }, action.content);\n  }\n\n  popoverFrom(actions) {\n    return actions.map(action => {\n      return /*#__PURE__*/React$1.createElement(Item$1, {\n        key: action.key\n      }, /*#__PURE__*/React$1.createElement(Popover$1, {\n        active: action.popoverOpen,\n        activator: this.activatorButtonFrom(action),\n        onClose: action.onAction,\n        preferredAlignment: \"left\",\n        sectioned: true\n      }, action.popoverContent));\n    });\n  }\n\n}\n\nConnectedFilterControl.contextType = FeaturesContext;\nexport { ConnectedFilterControl };","map":{"version":3,"sources":["/Users/timi/Desktop/typescript-test/node_modules/@shopify/polaris/dist/esm/components/Filters/components/ConnectedFilterControl/ConnectedFilterControl.js"],"names":["React$1","Component","createRef","FeaturesContext","debounce$1","EventListener","EventListener$1","classNames","Popover","Popover$1","Button","Button$1","styles","Item","Item$1","FILTER_FIELD_MIN_WIDTH","ConnectedFilterControl","constructor","args","context","state","availableWidth","proxyButtonsWidth","container","proxyButtonContainer","moreFiltersButtonContainer","handleResize","measureProxyButtons","measureAvailableWidth","leading","trailing","maxWait","componentDidMount","render","newDesignLanguage","children","rightPopoverableActions","rightAction","auxiliary","forceShowMorefiltersButton","props","actionsToRender","getActionsToRender","className","right","shouldRenderMoreFiltersButton","length","RightContainerClassName","RightContainer","RightContainerWithoutMoreFilters","rightMarkup","createElement","popoverFrom","moreFiltersButtonContainerClassname","MoreFiltersButtonContainer","onlyButtonVisible","rightActionMarkup","ref","proxyButtonMarkup","ProxyButtonContainer","map","action","key","activatorButtonFrom","auxMarkup","AuxiliaryContainer","Fragment","Wrapper","CenterContainer","event","handler","current","tolerance","Array","from","forEach","element","buttonWidth","getBoundingClientRect","width","buttonKey","HTMLElement","dataset","setState","containerWidth","moreFiltersButtonWidth","filtersActionWidth","actions","remainingWidth","actionsToReturn","i","actionWidth","push","onClick","onAction","disclosure","disabled","id","content","active","popoverOpen","activator","onClose","preferredAlignment","sectioned","popoverContent","contextType"],"mappings":"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","sourcesContent":["import React$1, { Component, createRef } from 'react';\nimport { FeaturesContext } from '../../../../utilities/features/context.js';\nimport debounce$1 from 'lodash/debounce';\nimport { EventListener as EventListener$1 } from '../../../EventListener/EventListener.js';\nimport { classNames } from '../../../../utilities/css.js';\nimport { Popover as Popover$1 } from '../../../Popover/Popover.js';\nimport { Button as Button$1 } from '../../../Button/Button.js';\nimport styles from './ConnectedFilterControl.scss.js';\nimport { Item as Item$1 } from './components/Item/Item.js';\n\nconst FILTER_FIELD_MIN_WIDTH = 150;\nclass ConnectedFilterControl extends Component {\n  constructor(...args) {\n    super(...args);\n    this.context = void 0;\n    this.state = {\n      availableWidth: 0,\n      proxyButtonsWidth: {}\n    };\n    this.container = /*#__PURE__*/createRef();\n    this.proxyButtonContainer = /*#__PURE__*/createRef();\n    this.moreFiltersButtonContainer = /*#__PURE__*/createRef();\n    this.handleResize = debounce$1(() => {\n      this.measureProxyButtons();\n      this.measureAvailableWidth();\n    }, 40, {\n      leading: true,\n      trailing: true,\n      maxWait: 40\n    });\n  }\n\n  componentDidMount() {\n    this.handleResize();\n  }\n\n  render() {\n    const {\n      newDesignLanguage\n    } = this.context || {};\n    const {\n      children,\n      rightPopoverableActions,\n      rightAction,\n      auxiliary,\n      forceShowMorefiltersButton = true\n    } = this.props;\n    const actionsToRender = rightPopoverableActions != null ? this.getActionsToRender(rightPopoverableActions) : [];\n    const className = classNames(styles.ConnectedFilterControl, rightPopoverableActions && styles.right, newDesignLanguage && styles.newDesignLanguage);\n    const shouldRenderMoreFiltersButton = forceShowMorefiltersButton || rightPopoverableActions && rightPopoverableActions.length !== actionsToRender.length;\n    const RightContainerClassName = classNames(styles.RightContainer, !shouldRenderMoreFiltersButton && styles.RightContainerWithoutMoreFilters);\n    const rightMarkup = actionsToRender.length > 0 ? /*#__PURE__*/React$1.createElement(\"div\", {\n      className: RightContainerClassName\n    }, this.popoverFrom(actionsToRender)) : null;\n    const moreFiltersButtonContainerClassname = classNames(styles.MoreFiltersButtonContainer, actionsToRender.length === 0 && newDesignLanguage && styles.onlyButtonVisible);\n    const rightActionMarkup = rightAction ? /*#__PURE__*/React$1.createElement(\"div\", {\n      ref: this.moreFiltersButtonContainer,\n      className: moreFiltersButtonContainerClassname\n    }, shouldRenderMoreFiltersButton && /*#__PURE__*/React$1.createElement(Item$1, null, rightAction)) : null;\n    const proxyButtonMarkup = rightPopoverableActions ? /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.ProxyButtonContainer,\n      ref: this.proxyButtonContainer,\n      \"aria-hidden\": true\n    }, rightPopoverableActions.map(action => /*#__PURE__*/React$1.createElement(\"div\", {\n      key: action.key,\n      \"data-key\": action.key\n    }, this.activatorButtonFrom(action)))) : null;\n    const auxMarkup = auxiliary ? /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.AuxiliaryContainer\n    }, auxiliary) : null;\n    return /*#__PURE__*/React$1.createElement(React$1.Fragment, null, proxyButtonMarkup, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Wrapper\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: className,\n      ref: this.container\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.CenterContainer\n    }, /*#__PURE__*/React$1.createElement(Item$1, null, children)), rightMarkup, rightActionMarkup, /*#__PURE__*/React$1.createElement(EventListener$1, {\n      event: \"resize\",\n      handler: this.handleResize\n    })), auxMarkup));\n  }\n\n  measureProxyButtons() {\n    if (this.proxyButtonContainer.current) {\n      const proxyButtonsWidth = {}; // this number is magical, but tweaking it solved the problem of items overlapping\n\n      const tolerance = 78;\n\n      if (this.proxyButtonContainer.current) {\n        Array.from(this.proxyButtonContainer.current.children).forEach(element => {\n          const buttonWidth = element.getBoundingClientRect().width + tolerance;\n          const buttonKey = element instanceof HTMLElement && element.dataset.key;\n\n          if (buttonKey) {\n            proxyButtonsWidth[buttonKey] = buttonWidth;\n          }\n        });\n      }\n\n      this.setState({\n        proxyButtonsWidth\n      });\n    }\n  }\n\n  measureAvailableWidth() {\n    if (this.container.current && this.moreFiltersButtonContainer.current) {\n      const containerWidth = this.container.current.getBoundingClientRect().width;\n      const moreFiltersButtonWidth = this.moreFiltersButtonContainer.current.getBoundingClientRect().width;\n      const filtersActionWidth = 0;\n      const availableWidth = containerWidth - FILTER_FIELD_MIN_WIDTH - moreFiltersButtonWidth - filtersActionWidth;\n      this.setState({\n        availableWidth\n      });\n    }\n  }\n\n  getActionsToRender(actions) {\n    let remainingWidth = this.state.availableWidth;\n    const actionsToReturn = [];\n\n    for (let i = 0; remainingWidth > 0 && i < actions.length; i++) {\n      const action = actions[i];\n      const actionWidth = this.state.proxyButtonsWidth[action.key];\n\n      if (actionWidth <= remainingWidth) {\n        actionsToReturn.push(action);\n        remainingWidth -= actionWidth;\n      } else {\n        // When we can't fit an action, we break the loop.\n        // The ones that didn't fit will be accessible through the \"More filters\" button\n        break;\n      }\n    }\n\n    return actionsToReturn;\n  }\n\n  activatorButtonFrom(action) {\n    return /*#__PURE__*/React$1.createElement(Button$1, {\n      onClick: action.onAction,\n      disclosure: true,\n      disabled: this.props.disabled || action.disabled,\n      id: `Activator-${action.key}`\n    }, action.content);\n  }\n\n  popoverFrom(actions) {\n    return actions.map(action => {\n      return /*#__PURE__*/React$1.createElement(Item$1, {\n        key: action.key\n      }, /*#__PURE__*/React$1.createElement(Popover$1, {\n        active: action.popoverOpen,\n        activator: this.activatorButtonFrom(action),\n        onClose: action.onAction,\n        preferredAlignment: \"left\",\n        sectioned: true\n      }, action.popoverContent));\n    });\n  }\n\n}\nConnectedFilterControl.contextType = FeaturesContext;\n\nexport { ConnectedFilterControl };\n"]},"metadata":{},"sourceType":"module"}