{"ast":null,"code":"import { Key } from '../../../../types.js';\nimport React$1, { Component, createRef } from 'react';\nimport { FeaturesContext } from '../../../../utilities/features/context.js';\nimport debounce$1 from 'lodash/debounce';\nimport { EventListener as EventListener$1 } from '../../../EventListener/EventListener.js';\nimport { classNames } from '../../../../utilities/css.js';\nimport isEqual$1 from 'lodash/isEqual';\nimport { labelID } from '../../../Label/Label.js';\nimport { Labelled as Labelled$1 } from '../../../Labelled/Labelled.js';\nimport { CSS_VAR_PREFIX } from '../../utilities/index.js';\nimport styles from './DualThumb.scss.js';\nvar Control;\n\n(function (Control) {\n  Control[Control[\"Lower\"] = 0] = \"Lower\";\n  Control[Control[\"Upper\"] = 1] = \"Upper\";\n})(Control || (Control = {}));\n\nclass DualThumb extends Component {\n  constructor(...args) {\n    super(...args);\n    this.context = void 0;\n    this.state = {\n      value: sanitizeValue(this.props.value, this.props.min, this.props.max, this.props.step),\n      trackWidth: 0,\n      trackLeft: 0\n    };\n    this.track = /*#__PURE__*/createRef();\n    this.trackWrapper = /*#__PURE__*/createRef();\n    this.thumbLower = /*#__PURE__*/createRef();\n    this.thumbUpper = /*#__PURE__*/createRef();\n    this.setTrackPosition = debounce$1(() => {\n      if (this.track.current) {\n        const newDesignLanguage = this.context && this.context.newDesignLanguage;\n        const thumbSize = newDesignLanguage ? 16 : 24;\n        const {\n          width,\n          left\n        } = this.track.current.getBoundingClientRect();\n        const adjustedTrackWidth = width - thumbSize;\n        const adjustedTrackLeft = left + thumbSize / 2;\n        this.setState({\n          trackWidth: adjustedTrackWidth,\n          trackLeft: adjustedTrackLeft\n        });\n      }\n    }, 40, {\n      leading: true,\n      trailing: true,\n      maxWait: 40\n    });\n\n    this.handleMouseDownThumbLower = event => {\n      if (event.button !== 0 || this.props.disabled) return;\n      registerMouseMoveHandler(this.handleMouseMoveThumbLower);\n      event.stopPropagation();\n    };\n\n    this.handleMouseMoveThumbLower = event => {\n      const valueUpper = this.state.value[1];\n      this.setValue([this.actualXPosition(event.clientX), valueUpper], Control.Upper);\n    };\n\n    this.handleTouchStartThumbLower = event => {\n      if (this.props.disabled) return;\n      registerTouchMoveHandler(this.handleTouchMoveThumbLower);\n      event.stopPropagation();\n    };\n\n    this.handleTouchMoveThumbLower = event => {\n      event.preventDefault();\n      const valueUpper = this.state.value[1];\n      this.setValue([this.actualXPosition(event.touches[0].clientX), valueUpper], Control.Upper);\n    };\n\n    this.handleMouseDownThumbUpper = event => {\n      if (event.button !== 0 || this.props.disabled) return;\n      registerMouseMoveHandler(this.handleMouseMoveThumbUpper);\n      event.stopPropagation();\n    };\n\n    this.handleMouseMoveThumbUpper = event => {\n      const valueLower = this.state.value[0];\n      this.setValue([valueLower, this.actualXPosition(event.clientX)], Control.Lower);\n    };\n\n    this.handleTouchStartThumbUpper = event => {\n      if (this.props.disabled) return;\n      registerTouchMoveHandler(this.handleTouchMoveThumbUpper);\n      event.stopPropagation();\n    };\n\n    this.handleTouchMoveThumbUpper = event => {\n      event.preventDefault();\n      const valueLower = this.state.value[0];\n      this.setValue([valueLower, this.actualXPosition(event.touches[0].clientX)], Control.Lower);\n    };\n\n    this.handleKeypressLower = event => {\n      if (this.props.disabled) return;\n      const {\n        incrementValueLower,\n        decrementValueLower\n      } = this;\n      const handlerMap = {\n        [Key.UpArrow]: incrementValueLower,\n        [Key.RightArrow]: incrementValueLower,\n        [Key.DownArrow]: decrementValueLower,\n        [Key.LeftArrow]: decrementValueLower\n      };\n      const handler = handlerMap[event.keyCode];\n\n      if (handler != null) {\n        event.preventDefault();\n        event.stopPropagation();\n        handler();\n      }\n    };\n\n    this.handleKeypressUpper = event => {\n      if (this.props.disabled) return;\n      const {\n        incrementValueUpper,\n        decrementValueUpper\n      } = this;\n      const handlerMap = {\n        [Key.UpArrow]: incrementValueUpper,\n        [Key.RightArrow]: incrementValueUpper,\n        [Key.DownArrow]: decrementValueUpper,\n        [Key.LeftArrow]: decrementValueUpper\n      };\n      const handler = handlerMap[event.keyCode];\n\n      if (handler != null) {\n        event.preventDefault();\n        event.stopPropagation();\n        handler();\n      }\n    };\n\n    this.incrementValueLower = () => {\n      this.setValue([this.state.value[0] + this.props.step, this.state.value[1]], Control.Upper);\n    };\n\n    this.decrementValueLower = () => {\n      this.setValue([this.state.value[0] - this.props.step, this.state.value[1]], Control.Upper);\n    };\n\n    this.incrementValueUpper = () => {\n      this.setValue([this.state.value[0], this.state.value[1] + this.props.step], Control.Lower);\n    };\n\n    this.decrementValueUpper = () => {\n      this.setValue([this.state.value[0], this.state.value[1] - this.props.step], Control.Lower);\n    };\n\n    this.dispatchValue = () => {\n      const {\n        onChange,\n        id\n      } = this.props;\n      const {\n        value\n      } = this.state;\n      onChange(value, id);\n    };\n\n    this.setValue = (dirtyValue, control) => {\n      const {\n        props: {\n          min,\n          max,\n          step\n        },\n        state: {\n          value\n        }\n      } = this;\n      const sanitizedValue = sanitizeValue(dirtyValue, min, max, step, control);\n\n      if (isEqual$1(sanitizedValue, value) === false) {\n        this.setState({\n          value: sanitizedValue\n        }, this.dispatchValue);\n      }\n    };\n\n    this.handleMouseDownTrack = event => {\n      if (event.button !== 0 || this.props.disabled) return;\n      event.preventDefault();\n      const clickXPosition = this.actualXPosition(event.clientX);\n      const {\n        value\n      } = this.state;\n      const distanceFromLowerThumb = Math.abs(value[0] - clickXPosition);\n      const distanceFromUpperThumb = Math.abs(value[1] - clickXPosition);\n\n      if (distanceFromLowerThumb <= distanceFromUpperThumb) {\n        this.setValue([clickXPosition, value[1]], Control.Upper);\n        registerMouseMoveHandler(this.handleMouseMoveThumbLower);\n\n        if (this.thumbLower.current != null) {\n          this.thumbLower.current.focus();\n        }\n      } else {\n        this.setValue([value[0], clickXPosition], Control.Lower);\n        registerMouseMoveHandler(this.handleMouseMoveThumbUpper);\n\n        if (this.thumbUpper.current != null) {\n          this.thumbUpper.current.focus();\n        }\n      }\n    };\n\n    this.handleTouchStartTrack = event => {\n      if (this.props.disabled) return;\n      event.preventDefault();\n      const clickXPosition = this.actualXPosition(event.touches[0].clientX);\n      const {\n        value\n      } = this.state;\n      const distanceFromLowerThumb = Math.abs(value[0] - clickXPosition);\n      const distanceFromUpperThumb = Math.abs(value[1] - clickXPosition);\n\n      if (distanceFromLowerThumb <= distanceFromUpperThumb) {\n        this.setValue([clickXPosition, value[1]], Control.Upper);\n        registerTouchMoveHandler(this.handleTouchMoveThumbLower);\n\n        if (this.thumbLower.current != null) {\n          this.thumbLower.current.focus();\n        }\n      } else {\n        this.setValue([value[0], clickXPosition], Control.Lower);\n        registerTouchMoveHandler(this.handleTouchMoveThumbUpper);\n\n        if (this.thumbUpper.current != null) {\n          this.thumbUpper.current.focus();\n        }\n      }\n    };\n\n    this.actualXPosition = dirtyXPosition => {\n      if (this.track.current) {\n        const {\n          min,\n          max\n        } = this.props;\n        const {\n          trackLeft,\n          trackWidth\n        } = this.state;\n        const relativeX = dirtyXPosition - trackLeft;\n        const percentageOfTrack = relativeX / trackWidth;\n        return percentageOfTrack * (max - min);\n      } else {\n        return 0;\n      }\n    };\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    const {\n      min,\n      step,\n      max,\n      value,\n      onChange,\n      id\n    } = props;\n    const {\n      prevValue\n    } = state;\n\n    if (isEqual$1(prevValue, value)) {\n      return null;\n    }\n\n    const sanitizedValue = sanitizeValue(value, min, max, step);\n\n    if (!isEqual$1(value, sanitizedValue)) {\n      onChange(sanitizedValue, id);\n    }\n\n    return {\n      prevValue: value,\n      value: sanitizedValue\n    };\n  }\n\n  componentDidMount() {\n    this.setTrackPosition();\n\n    if (this.trackWrapper.current != null) {\n      this.trackWrapper.current.addEventListener('touchstart', this.handleTouchStartTrack, {\n        passive: false\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.trackWrapper.current != null) {\n      this.trackWrapper.current.removeEventListener('touchstart', this.handleTouchStartTrack);\n    }\n  }\n\n  render() {\n    const {\n      id,\n      min,\n      max,\n      prefix,\n      suffix,\n      disabled,\n      output,\n      error,\n      onFocus,\n      onBlur,\n      label,\n      labelAction,\n      labelHidden,\n      helpText\n    } = this.props;\n    const {\n      value\n    } = this.state;\n    const idLower = id;\n    const idUpper = `${id}Upper`;\n    const describedBy = [];\n\n    if (error) {\n      describedBy.push(`${id}Error`);\n    }\n\n    const ariaDescribedBy = describedBy.length ? describedBy.join(' ') : undefined;\n    const trackWrapperClassName = classNames(styles.TrackWrapper, error && styles.error, disabled && styles.disabled);\n    const thumbLowerClassName = classNames(styles.Thumbs, styles.ThumbLower, disabled && styles.disabled, this.context && this.context.newDesignLanguage && styles.newDesignLanguage);\n    const thumbUpperClassName = classNames(styles.Thumbs, styles.ThumbUpper, disabled && styles.disabled, this.context && this.context.newDesignLanguage && styles.newDesignLanguage);\n    const trackWidth = this.state.trackWidth;\n    const range = max - min;\n    const leftPositionThumbLower = value[0] / range * trackWidth;\n    const leftPositionThumbUpper = value[1] / range * trackWidth;\n    const outputLowerClassName = classNames(styles.Output, styles.OutputLower);\n    const outputMarkupLower = !disabled && output ? /*#__PURE__*/React$1.createElement(\"output\", {\n      htmlFor: idLower,\n      className: outputLowerClassName,\n      style: {\n        left: `${leftPositionThumbLower}px`\n      }\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.OutputBubble\n    }, /*#__PURE__*/React$1.createElement(\"span\", {\n      className: styles.OutputText\n    }, value[0]))) : null;\n    const outputUpperClassName = classNames(styles.Output, styles.OutputUpper);\n    const outputMarkupUpper = !disabled && output ? /*#__PURE__*/React$1.createElement(\"output\", {\n      htmlFor: idUpper,\n      className: outputUpperClassName,\n      style: {\n        left: `${leftPositionThumbUpper}px`\n      }\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.OutputBubble\n    }, /*#__PURE__*/React$1.createElement(\"span\", {\n      className: styles.OutputText\n    }, value[1]))) : null;\n    const cssVars = {\n      [`${CSS_VAR_PREFIX}progress-lower`]: `${leftPositionThumbLower}px`,\n      [`${CSS_VAR_PREFIX}progress-upper`]: `${leftPositionThumbUpper}px`\n    };\n    const prefixMarkup = prefix && /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Prefix\n    }, prefix);\n    const suffixMarkup = suffix && /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Suffix\n    }, suffix);\n    return /*#__PURE__*/React$1.createElement(React$1.Fragment, null, /*#__PURE__*/React$1.createElement(Labelled$1, {\n      id: id,\n      label: label,\n      error: error,\n      action: labelAction,\n      labelHidden: labelHidden,\n      helpText: helpText\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Wrapper\n    }, prefixMarkup, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: trackWrapperClassName,\n      onMouseDown: this.handleMouseDownTrack,\n      ref: this.trackWrapper\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Track,\n      style: cssVars,\n      ref: this.track\n    }), /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles['Track--dashed']\n    }), /*#__PURE__*/React$1.createElement(\"button\", {\n      id: idLower,\n      className: thumbLowerClassName,\n      style: {\n        left: `${leftPositionThumbLower}px`\n      },\n      role: \"slider\",\n      \"aria-disabled\": disabled,\n      \"aria-valuemin\": min,\n      \"aria-valuemax\": max,\n      \"aria-valuenow\": value[0],\n      \"aria-invalid\": Boolean(error),\n      \"aria-describedby\": ariaDescribedBy,\n      \"aria-labelledby\": labelID(id),\n      onFocus: onFocus,\n      onBlur: onBlur,\n      onKeyDown: this.handleKeypressLower,\n      onMouseDown: this.handleMouseDownThumbLower,\n      onTouchStart: this.handleTouchStartThumbLower,\n      ref: this.thumbLower,\n      disabled: disabled\n    }), outputMarkupLower, /*#__PURE__*/React$1.createElement(\"button\", {\n      id: idUpper,\n      className: thumbUpperClassName,\n      style: {\n        left: `${leftPositionThumbUpper}px`\n      },\n      role: \"slider\",\n      \"aria-disabled\": disabled,\n      \"aria-valuemin\": min,\n      \"aria-valuemax\": max,\n      \"aria-valuenow\": value[1],\n      \"aria-invalid\": Boolean(error),\n      \"aria-describedby\": ariaDescribedBy,\n      \"aria-labelledby\": labelID(id),\n      onFocus: onFocus,\n      onBlur: onBlur,\n      onKeyDown: this.handleKeypressUpper,\n      onMouseDown: this.handleMouseDownThumbUpper,\n      onTouchStart: this.handleTouchStartThumbUpper,\n      ref: this.thumbUpper,\n      disabled: disabled\n    }), outputMarkupUpper), suffixMarkup)), /*#__PURE__*/React$1.createElement(EventListener$1, {\n      event: \"resize\",\n      handler: this.setTrackPosition\n    }));\n  }\n\n}\n\nDualThumb.contextType = FeaturesContext;\n\nfunction registerMouseMoveHandler(handler) {\n  document.addEventListener('mousemove', handler);\n  document.addEventListener('mouseup', () => {\n    document.removeEventListener('mousemove', handler);\n  }, {\n    once: true\n  });\n}\n\nfunction registerTouchMoveHandler(handler) {\n  const removeHandler = () => {\n    document.removeEventListener('touchmove', handler);\n    document.removeEventListener('touchend', removeHandler);\n    document.removeEventListener('touchcancel', removeHandler);\n  };\n\n  document.addEventListener('touchmove', handler, {\n    passive: false\n  });\n  document.addEventListener('touchend', removeHandler, {\n    once: true\n  });\n  document.addEventListener('touchcancel', removeHandler, {\n    once: true\n  });\n}\n\nfunction sanitizeValue(value, min, max, step, control = Control.Upper) {\n  let upperValue = inBoundsUpper(roundedToStep(value[1]));\n  let lowerValue = inBoundsLower(roundedToStep(value[0]));\n  const maxLowerValue = upperValue - step;\n  const minUpperValue = lowerValue + step;\n\n  if (control === Control.Upper && lowerValue > maxLowerValue) {\n    lowerValue = maxLowerValue;\n  } else if (control === Control.Lower && upperValue < minUpperValue) {\n    upperValue = minUpperValue;\n  }\n\n  return [lowerValue, upperValue];\n\n  function inBoundsUpper(value) {\n    const lowerMin = min + step;\n\n    if (value < lowerMin) {\n      return lowerMin;\n    } else if (value > max) {\n      return max;\n    } else {\n      return value;\n    }\n  }\n\n  function inBoundsLower(value) {\n    const upperMax = max - step;\n\n    if (value < min) {\n      return min;\n    } else if (value > upperMax) {\n      return upperMax;\n    } else {\n      return value;\n    }\n  }\n\n  function roundedToStep(value) {\n    return Math.round(value / step) * step;\n  }\n}\n\nexport { DualThumb };","map":{"version":3,"sources":["/Users/timi/Desktop/typescript-test/node_modules/@shopify/polaris/dist/esm/components/RangeSlider/components/DualThumb/DualThumb.js"],"names":["Key","React$1","Component","createRef","FeaturesContext","debounce$1","EventListener","EventListener$1","classNames","isEqual$1","labelID","Labelled","Labelled$1","CSS_VAR_PREFIX","styles","Control","DualThumb","constructor","args","context","state","value","sanitizeValue","props","min","max","step","trackWidth","trackLeft","track","trackWrapper","thumbLower","thumbUpper","setTrackPosition","current","newDesignLanguage","thumbSize","width","left","getBoundingClientRect","adjustedTrackWidth","adjustedTrackLeft","setState","leading","trailing","maxWait","handleMouseDownThumbLower","event","button","disabled","registerMouseMoveHandler","handleMouseMoveThumbLower","stopPropagation","valueUpper","setValue","actualXPosition","clientX","Upper","handleTouchStartThumbLower","registerTouchMoveHandler","handleTouchMoveThumbLower","preventDefault","touches","handleMouseDownThumbUpper","handleMouseMoveThumbUpper","valueLower","Lower","handleTouchStartThumbUpper","handleTouchMoveThumbUpper","handleKeypressLower","incrementValueLower","decrementValueLower","handlerMap","UpArrow","RightArrow","DownArrow","LeftArrow","handler","keyCode","handleKeypressUpper","incrementValueUpper","decrementValueUpper","dispatchValue","onChange","id","dirtyValue","control","sanitizedValue","handleMouseDownTrack","clickXPosition","distanceFromLowerThumb","Math","abs","distanceFromUpperThumb","focus","handleTouchStartTrack","dirtyXPosition","relativeX","percentageOfTrack","getDerivedStateFromProps","prevValue","componentDidMount","addEventListener","passive","componentWillUnmount","removeEventListener","render","prefix","suffix","output","error","onFocus","onBlur","label","labelAction","labelHidden","helpText","idLower","idUpper","describedBy","push","ariaDescribedBy","length","join","undefined","trackWrapperClassName","TrackWrapper","thumbLowerClassName","Thumbs","ThumbLower","thumbUpperClassName","ThumbUpper","range","leftPositionThumbLower","leftPositionThumbUpper","outputLowerClassName","Output","OutputLower","outputMarkupLower","createElement","htmlFor","className","style","OutputBubble","OutputText","outputUpperClassName","OutputUpper","outputMarkupUpper","cssVars","prefixMarkup","Prefix","suffixMarkup","Suffix","Fragment","action","Wrapper","onMouseDown","ref","Track","role","Boolean","onKeyDown","onTouchStart","contextType","document","once","removeHandler","upperValue","inBoundsUpper","roundedToStep","lowerValue","inBoundsLower","maxLowerValue","minUpperValue","lowerMin","upperMax","round"],"mappings":"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","sourcesContent":["import { Key } from '../../../../types.js';\nimport React$1, { Component, createRef } from 'react';\nimport { FeaturesContext } from '../../../../utilities/features/context.js';\nimport debounce$1 from 'lodash/debounce';\nimport { EventListener as EventListener$1 } from '../../../EventListener/EventListener.js';\nimport { classNames } from '../../../../utilities/css.js';\nimport isEqual$1 from 'lodash/isEqual';\nimport { labelID } from '../../../Label/Label.js';\nimport { Labelled as Labelled$1 } from '../../../Labelled/Labelled.js';\nimport { CSS_VAR_PREFIX } from '../../utilities/index.js';\nimport styles from './DualThumb.scss.js';\n\nvar Control;\n\n(function (Control) {\n  Control[Control[\"Lower\"] = 0] = \"Lower\";\n  Control[Control[\"Upper\"] = 1] = \"Upper\";\n})(Control || (Control = {}));\n\nclass DualThumb extends Component {\n  constructor(...args) {\n    super(...args);\n    this.context = void 0;\n    this.state = {\n      value: sanitizeValue(this.props.value, this.props.min, this.props.max, this.props.step),\n      trackWidth: 0,\n      trackLeft: 0\n    };\n    this.track = /*#__PURE__*/createRef();\n    this.trackWrapper = /*#__PURE__*/createRef();\n    this.thumbLower = /*#__PURE__*/createRef();\n    this.thumbUpper = /*#__PURE__*/createRef();\n    this.setTrackPosition = debounce$1(() => {\n      if (this.track.current) {\n        const newDesignLanguage = this.context && this.context.newDesignLanguage;\n        const thumbSize = newDesignLanguage ? 16 : 24;\n        const {\n          width,\n          left\n        } = this.track.current.getBoundingClientRect();\n        const adjustedTrackWidth = width - thumbSize;\n        const adjustedTrackLeft = left + thumbSize / 2;\n        this.setState({\n          trackWidth: adjustedTrackWidth,\n          trackLeft: adjustedTrackLeft\n        });\n      }\n    }, 40, {\n      leading: true,\n      trailing: true,\n      maxWait: 40\n    });\n\n    this.handleMouseDownThumbLower = event => {\n      if (event.button !== 0 || this.props.disabled) return;\n      registerMouseMoveHandler(this.handleMouseMoveThumbLower);\n      event.stopPropagation();\n    };\n\n    this.handleMouseMoveThumbLower = event => {\n      const valueUpper = this.state.value[1];\n      this.setValue([this.actualXPosition(event.clientX), valueUpper], Control.Upper);\n    };\n\n    this.handleTouchStartThumbLower = event => {\n      if (this.props.disabled) return;\n      registerTouchMoveHandler(this.handleTouchMoveThumbLower);\n      event.stopPropagation();\n    };\n\n    this.handleTouchMoveThumbLower = event => {\n      event.preventDefault();\n      const valueUpper = this.state.value[1];\n      this.setValue([this.actualXPosition(event.touches[0].clientX), valueUpper], Control.Upper);\n    };\n\n    this.handleMouseDownThumbUpper = event => {\n      if (event.button !== 0 || this.props.disabled) return;\n      registerMouseMoveHandler(this.handleMouseMoveThumbUpper);\n      event.stopPropagation();\n    };\n\n    this.handleMouseMoveThumbUpper = event => {\n      const valueLower = this.state.value[0];\n      this.setValue([valueLower, this.actualXPosition(event.clientX)], Control.Lower);\n    };\n\n    this.handleTouchStartThumbUpper = event => {\n      if (this.props.disabled) return;\n      registerTouchMoveHandler(this.handleTouchMoveThumbUpper);\n      event.stopPropagation();\n    };\n\n    this.handleTouchMoveThumbUpper = event => {\n      event.preventDefault();\n      const valueLower = this.state.value[0];\n      this.setValue([valueLower, this.actualXPosition(event.touches[0].clientX)], Control.Lower);\n    };\n\n    this.handleKeypressLower = event => {\n      if (this.props.disabled) return;\n      const {\n        incrementValueLower,\n        decrementValueLower\n      } = this;\n      const handlerMap = {\n        [Key.UpArrow]: incrementValueLower,\n        [Key.RightArrow]: incrementValueLower,\n        [Key.DownArrow]: decrementValueLower,\n        [Key.LeftArrow]: decrementValueLower\n      };\n      const handler = handlerMap[event.keyCode];\n\n      if (handler != null) {\n        event.preventDefault();\n        event.stopPropagation();\n        handler();\n      }\n    };\n\n    this.handleKeypressUpper = event => {\n      if (this.props.disabled) return;\n      const {\n        incrementValueUpper,\n        decrementValueUpper\n      } = this;\n      const handlerMap = {\n        [Key.UpArrow]: incrementValueUpper,\n        [Key.RightArrow]: incrementValueUpper,\n        [Key.DownArrow]: decrementValueUpper,\n        [Key.LeftArrow]: decrementValueUpper\n      };\n      const handler = handlerMap[event.keyCode];\n\n      if (handler != null) {\n        event.preventDefault();\n        event.stopPropagation();\n        handler();\n      }\n    };\n\n    this.incrementValueLower = () => {\n      this.setValue([this.state.value[0] + this.props.step, this.state.value[1]], Control.Upper);\n    };\n\n    this.decrementValueLower = () => {\n      this.setValue([this.state.value[0] - this.props.step, this.state.value[1]], Control.Upper);\n    };\n\n    this.incrementValueUpper = () => {\n      this.setValue([this.state.value[0], this.state.value[1] + this.props.step], Control.Lower);\n    };\n\n    this.decrementValueUpper = () => {\n      this.setValue([this.state.value[0], this.state.value[1] - this.props.step], Control.Lower);\n    };\n\n    this.dispatchValue = () => {\n      const {\n        onChange,\n        id\n      } = this.props;\n      const {\n        value\n      } = this.state;\n      onChange(value, id);\n    };\n\n    this.setValue = (dirtyValue, control) => {\n      const {\n        props: {\n          min,\n          max,\n          step\n        },\n        state: {\n          value\n        }\n      } = this;\n      const sanitizedValue = sanitizeValue(dirtyValue, min, max, step, control);\n\n      if (isEqual$1(sanitizedValue, value) === false) {\n        this.setState({\n          value: sanitizedValue\n        }, this.dispatchValue);\n      }\n    };\n\n    this.handleMouseDownTrack = event => {\n      if (event.button !== 0 || this.props.disabled) return;\n      event.preventDefault();\n      const clickXPosition = this.actualXPosition(event.clientX);\n      const {\n        value\n      } = this.state;\n      const distanceFromLowerThumb = Math.abs(value[0] - clickXPosition);\n      const distanceFromUpperThumb = Math.abs(value[1] - clickXPosition);\n\n      if (distanceFromLowerThumb <= distanceFromUpperThumb) {\n        this.setValue([clickXPosition, value[1]], Control.Upper);\n        registerMouseMoveHandler(this.handleMouseMoveThumbLower);\n\n        if (this.thumbLower.current != null) {\n          this.thumbLower.current.focus();\n        }\n      } else {\n        this.setValue([value[0], clickXPosition], Control.Lower);\n        registerMouseMoveHandler(this.handleMouseMoveThumbUpper);\n\n        if (this.thumbUpper.current != null) {\n          this.thumbUpper.current.focus();\n        }\n      }\n    };\n\n    this.handleTouchStartTrack = event => {\n      if (this.props.disabled) return;\n      event.preventDefault();\n      const clickXPosition = this.actualXPosition(event.touches[0].clientX);\n      const {\n        value\n      } = this.state;\n      const distanceFromLowerThumb = Math.abs(value[0] - clickXPosition);\n      const distanceFromUpperThumb = Math.abs(value[1] - clickXPosition);\n\n      if (distanceFromLowerThumb <= distanceFromUpperThumb) {\n        this.setValue([clickXPosition, value[1]], Control.Upper);\n        registerTouchMoveHandler(this.handleTouchMoveThumbLower);\n\n        if (this.thumbLower.current != null) {\n          this.thumbLower.current.focus();\n        }\n      } else {\n        this.setValue([value[0], clickXPosition], Control.Lower);\n        registerTouchMoveHandler(this.handleTouchMoveThumbUpper);\n\n        if (this.thumbUpper.current != null) {\n          this.thumbUpper.current.focus();\n        }\n      }\n    };\n\n    this.actualXPosition = dirtyXPosition => {\n      if (this.track.current) {\n        const {\n          min,\n          max\n        } = this.props;\n        const {\n          trackLeft,\n          trackWidth\n        } = this.state;\n        const relativeX = dirtyXPosition - trackLeft;\n        const percentageOfTrack = relativeX / trackWidth;\n        return percentageOfTrack * (max - min);\n      } else {\n        return 0;\n      }\n    };\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    const {\n      min,\n      step,\n      max,\n      value,\n      onChange,\n      id\n    } = props;\n    const {\n      prevValue\n    } = state;\n\n    if (isEqual$1(prevValue, value)) {\n      return null;\n    }\n\n    const sanitizedValue = sanitizeValue(value, min, max, step);\n\n    if (!isEqual$1(value, sanitizedValue)) {\n      onChange(sanitizedValue, id);\n    }\n\n    return {\n      prevValue: value,\n      value: sanitizedValue\n    };\n  }\n\n  componentDidMount() {\n    this.setTrackPosition();\n\n    if (this.trackWrapper.current != null) {\n      this.trackWrapper.current.addEventListener('touchstart', this.handleTouchStartTrack, {\n        passive: false\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.trackWrapper.current != null) {\n      this.trackWrapper.current.removeEventListener('touchstart', this.handleTouchStartTrack);\n    }\n  }\n\n  render() {\n    const {\n      id,\n      min,\n      max,\n      prefix,\n      suffix,\n      disabled,\n      output,\n      error,\n      onFocus,\n      onBlur,\n      label,\n      labelAction,\n      labelHidden,\n      helpText\n    } = this.props;\n    const {\n      value\n    } = this.state;\n    const idLower = id;\n    const idUpper = `${id}Upper`;\n    const describedBy = [];\n\n    if (error) {\n      describedBy.push(`${id}Error`);\n    }\n\n    const ariaDescribedBy = describedBy.length ? describedBy.join(' ') : undefined;\n    const trackWrapperClassName = classNames(styles.TrackWrapper, error && styles.error, disabled && styles.disabled);\n    const thumbLowerClassName = classNames(styles.Thumbs, styles.ThumbLower, disabled && styles.disabled, this.context && this.context.newDesignLanguage && styles.newDesignLanguage);\n    const thumbUpperClassName = classNames(styles.Thumbs, styles.ThumbUpper, disabled && styles.disabled, this.context && this.context.newDesignLanguage && styles.newDesignLanguage);\n    const trackWidth = this.state.trackWidth;\n    const range = max - min;\n    const leftPositionThumbLower = value[0] / range * trackWidth;\n    const leftPositionThumbUpper = value[1] / range * trackWidth;\n    const outputLowerClassName = classNames(styles.Output, styles.OutputLower);\n    const outputMarkupLower = !disabled && output ? /*#__PURE__*/React$1.createElement(\"output\", {\n      htmlFor: idLower,\n      className: outputLowerClassName,\n      style: {\n        left: `${leftPositionThumbLower}px`\n      }\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.OutputBubble\n    }, /*#__PURE__*/React$1.createElement(\"span\", {\n      className: styles.OutputText\n    }, value[0]))) : null;\n    const outputUpperClassName = classNames(styles.Output, styles.OutputUpper);\n    const outputMarkupUpper = !disabled && output ? /*#__PURE__*/React$1.createElement(\"output\", {\n      htmlFor: idUpper,\n      className: outputUpperClassName,\n      style: {\n        left: `${leftPositionThumbUpper}px`\n      }\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.OutputBubble\n    }, /*#__PURE__*/React$1.createElement(\"span\", {\n      className: styles.OutputText\n    }, value[1]))) : null;\n    const cssVars = {\n      [`${CSS_VAR_PREFIX}progress-lower`]: `${leftPositionThumbLower}px`,\n      [`${CSS_VAR_PREFIX}progress-upper`]: `${leftPositionThumbUpper}px`\n    };\n    const prefixMarkup = prefix && /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Prefix\n    }, prefix);\n    const suffixMarkup = suffix && /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Suffix\n    }, suffix);\n    return /*#__PURE__*/React$1.createElement(React$1.Fragment, null, /*#__PURE__*/React$1.createElement(Labelled$1, {\n      id: id,\n      label: label,\n      error: error,\n      action: labelAction,\n      labelHidden: labelHidden,\n      helpText: helpText\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Wrapper\n    }, prefixMarkup, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: trackWrapperClassName,\n      onMouseDown: this.handleMouseDownTrack,\n      ref: this.trackWrapper\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Track,\n      style: cssVars,\n      ref: this.track\n    }), /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles['Track--dashed']\n    }), /*#__PURE__*/React$1.createElement(\"button\", {\n      id: idLower,\n      className: thumbLowerClassName,\n      style: {\n        left: `${leftPositionThumbLower}px`\n      },\n      role: \"slider\",\n      \"aria-disabled\": disabled,\n      \"aria-valuemin\": min,\n      \"aria-valuemax\": max,\n      \"aria-valuenow\": value[0],\n      \"aria-invalid\": Boolean(error),\n      \"aria-describedby\": ariaDescribedBy,\n      \"aria-labelledby\": labelID(id),\n      onFocus: onFocus,\n      onBlur: onBlur,\n      onKeyDown: this.handleKeypressLower,\n      onMouseDown: this.handleMouseDownThumbLower,\n      onTouchStart: this.handleTouchStartThumbLower,\n      ref: this.thumbLower,\n      disabled: disabled\n    }), outputMarkupLower, /*#__PURE__*/React$1.createElement(\"button\", {\n      id: idUpper,\n      className: thumbUpperClassName,\n      style: {\n        left: `${leftPositionThumbUpper}px`\n      },\n      role: \"slider\",\n      \"aria-disabled\": disabled,\n      \"aria-valuemin\": min,\n      \"aria-valuemax\": max,\n      \"aria-valuenow\": value[1],\n      \"aria-invalid\": Boolean(error),\n      \"aria-describedby\": ariaDescribedBy,\n      \"aria-labelledby\": labelID(id),\n      onFocus: onFocus,\n      onBlur: onBlur,\n      onKeyDown: this.handleKeypressUpper,\n      onMouseDown: this.handleMouseDownThumbUpper,\n      onTouchStart: this.handleTouchStartThumbUpper,\n      ref: this.thumbUpper,\n      disabled: disabled\n    }), outputMarkupUpper), suffixMarkup)), /*#__PURE__*/React$1.createElement(EventListener$1, {\n      event: \"resize\",\n      handler: this.setTrackPosition\n    }));\n  }\n\n}\nDualThumb.contextType = FeaturesContext;\n\nfunction registerMouseMoveHandler(handler) {\n  document.addEventListener('mousemove', handler);\n  document.addEventListener('mouseup', () => {\n    document.removeEventListener('mousemove', handler);\n  }, {\n    once: true\n  });\n}\n\nfunction registerTouchMoveHandler(handler) {\n  const removeHandler = () => {\n    document.removeEventListener('touchmove', handler);\n    document.removeEventListener('touchend', removeHandler);\n    document.removeEventListener('touchcancel', removeHandler);\n  };\n\n  document.addEventListener('touchmove', handler, {\n    passive: false\n  });\n  document.addEventListener('touchend', removeHandler, {\n    once: true\n  });\n  document.addEventListener('touchcancel', removeHandler, {\n    once: true\n  });\n}\n\nfunction sanitizeValue(value, min, max, step, control = Control.Upper) {\n  let upperValue = inBoundsUpper(roundedToStep(value[1]));\n  let lowerValue = inBoundsLower(roundedToStep(value[0]));\n  const maxLowerValue = upperValue - step;\n  const minUpperValue = lowerValue + step;\n\n  if (control === Control.Upper && lowerValue > maxLowerValue) {\n    lowerValue = maxLowerValue;\n  } else if (control === Control.Lower && upperValue < minUpperValue) {\n    upperValue = minUpperValue;\n  }\n\n  return [lowerValue, upperValue];\n\n  function inBoundsUpper(value) {\n    const lowerMin = min + step;\n\n    if (value < lowerMin) {\n      return lowerMin;\n    } else if (value > max) {\n      return max;\n    } else {\n      return value;\n    }\n  }\n\n  function inBoundsLower(value) {\n    const upperMax = max - step;\n\n    if (value < min) {\n      return min;\n    } else if (value > upperMax) {\n      return upperMax;\n    } else {\n      return value;\n    }\n  }\n\n  function roundedToStep(value) {\n    return Math.round(value / step) * step;\n  }\n}\n\nexport { DualThumb };\n"]},"metadata":{},"sourceType":"module"}