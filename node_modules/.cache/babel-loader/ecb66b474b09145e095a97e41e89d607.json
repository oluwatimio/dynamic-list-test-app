{"ast":null,"code":"import { objectSpread2 as _objectSpread2 } from '../../_virtual/_rollupPluginBabelHelpers.js';\nimport React$1, { PureComponent, createRef } from 'react';\nimport { durationSlow } from '@shopify/polaris-tokens';\nimport { useFeatures } from '../../utilities/features/hooks.js';\nimport { useMediaQuery } from '../../utilities/media-query/hooks.js';\nimport { EventListener as EventListener$1 } from '../EventListener/EventListener.js';\nimport { useI18n } from '../../utilities/i18n/hooks.js';\nimport { layer, dataPolarisTopBar } from '../shared.js';\nimport { classNames } from '../../utilities/css.js';\nimport { MobileCancelMajor } from '@shopify/polaris-icons';\nimport { Icon as Icon$1 } from '../Icon/Icon.js';\nimport { Button as Button$1 } from '../Button/Button.js';\nimport { Backdrop as Backdrop$1 } from '../Backdrop/Backdrop.js';\nimport { CSSTransition } from 'react-transition-group';\nimport { FrameContext } from '../../utilities/frame/context.js';\nimport { TrapFocus as TrapFocus$1 } from '../TrapFocus/TrapFocus.js';\nimport { setRootProperty as setRootProperty$1 } from '../../utilities/set-root-property.js';\nimport { ToastManager as ToastManager$1 } from './components/ToastManager/ToastManager.js';\nimport { Loading as Loading$1 } from './components/Loading/Loading.js';\nimport { ContextualSaveBar as ContextualSaveBar$1 } from './components/ContextualSaveBar/ContextualSaveBar.js';\nimport { CSSAnimation as CSSAnimation$1 } from './components/CSSAnimation/CSSAnimation.js';\nimport styles from './Frame.scss.js';\nconst GLOBAL_RIBBON_CUSTOM_PROPERTY = '--global-ribbon-height';\nconst APP_FRAME_MAIN = 'AppFrameMain';\nconst APP_FRAME_MAIN_ANCHOR_TARGET = 'AppFrameMainContent';\nconst APP_FRAME_NAV = 'AppFrameNav';\nconst APP_FRAME_TOP_BAR = 'AppFrameTopBar';\nconst APP_FRAME_LOADING_BAR = 'AppFrameLoadingBar';\n\nvar _ref = /*#__PURE__*/React$1.createElement(Icon$1, {\n  source: MobileCancelMajor\n});\n\nvar _ref2 = /*#__PURE__*/React$1.createElement(Loading$1, null);\n\nclass FrameInner extends PureComponent {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      skipFocused: false,\n      globalRibbonHeight: 0,\n      loadingStack: 0,\n      toastMessages: [],\n      showContextualSaveBar: false\n    };\n    this.contextualSaveBar = null;\n    this.globalRibbonContainer = null;\n    this.navigationNode = /*#__PURE__*/createRef();\n    this.skipToMainContentTargetNode = this.props.skipToContentTarget || /*#__PURE__*/createRef();\n\n    this.setGlobalRibbonHeight = () => {\n      const {\n        globalRibbonContainer\n      } = this;\n\n      if (globalRibbonContainer) {\n        this.setState({\n          globalRibbonHeight: globalRibbonContainer.offsetHeight\n        }, this.setGlobalRibbonRootProperty);\n      }\n    };\n\n    this.setGlobalRibbonRootProperty = () => {\n      const {\n        globalRibbonHeight\n      } = this.state;\n      setRootProperty$1(GLOBAL_RIBBON_CUSTOM_PROPERTY, `${globalRibbonHeight}px`, null);\n    };\n\n    this.showToast = toast => {\n      this.setState(({\n        toastMessages\n      }) => {\n        const hasToastById = toastMessages.find(({\n          id\n        }) => id === toast.id) != null;\n        return {\n          toastMessages: hasToastById ? toastMessages : [...toastMessages, toast]\n        };\n      });\n    };\n\n    this.hideToast = ({\n      id\n    }) => {\n      this.setState(({\n        toastMessages\n      }) => {\n        return {\n          toastMessages: toastMessages.filter(({\n            id: toastId\n          }) => id !== toastId)\n        };\n      });\n    };\n\n    this.setContextualSaveBar = props => {\n      const {\n        showContextualSaveBar\n      } = this.state;\n      this.contextualSaveBar = _objectSpread2({}, props);\n\n      if (showContextualSaveBar === true) {\n        this.forceUpdate();\n      } else {\n        this.setState({\n          showContextualSaveBar: true\n        });\n      }\n    };\n\n    this.removeContextualSaveBar = () => {\n      this.contextualSaveBar = null;\n      this.setState({\n        showContextualSaveBar: false\n      });\n    };\n\n    this.startLoading = () => {\n      this.setState(({\n        loadingStack\n      }) => ({\n        loadingStack: loadingStack + 1\n      }));\n    };\n\n    this.stopLoading = () => {\n      this.setState(({\n        loadingStack\n      }) => ({\n        loadingStack: Math.max(0, loadingStack - 1)\n      }));\n    };\n\n    this.handleResize = () => {\n      if (this.props.globalRibbon) {\n        this.setGlobalRibbonHeight();\n      }\n    };\n\n    this.handleFocus = () => {\n      this.setState({\n        skipFocused: true\n      });\n    };\n\n    this.handleBlur = () => {\n      this.setState({\n        skipFocused: false\n      });\n    };\n\n    this.handleClick = () => {\n      this.skipToMainContentTargetNode.current && this.skipToMainContentTargetNode.current.focus();\n    };\n\n    this.handleNavigationDismiss = () => {\n      const {\n        onNavigationDismiss\n      } = this.props;\n\n      if (onNavigationDismiss != null) {\n        onNavigationDismiss();\n      }\n    };\n\n    this.setGlobalRibbonContainer = node => {\n      this.globalRibbonContainer = node;\n    };\n\n    this.handleNavKeydown = event => {\n      const {\n        key\n      } = event;\n      const {\n        mediaQuery: {\n          isNavigationCollapsed\n        },\n        showMobileNavigation\n      } = this.props;\n      const mobileNavShowing = isNavigationCollapsed && showMobileNavigation;\n\n      if (mobileNavShowing && key === 'Escape') {\n        this.handleNavigationDismiss();\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.handleResize();\n\n    if (this.props.globalRibbon) {\n      return;\n    }\n\n    this.setGlobalRibbonRootProperty();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.globalRibbon !== prevProps.globalRibbon) {\n      this.setGlobalRibbonHeight();\n    }\n  }\n\n  render() {\n    const {\n      skipFocused,\n      loadingStack,\n      toastMessages,\n      showContextualSaveBar\n    } = this.state;\n    const {\n      children,\n      navigation,\n      topBar,\n      globalRibbon,\n      showMobileNavigation = false,\n      skipToContentTarget,\n      i18n,\n      mediaQuery: {\n        isNavigationCollapsed\n      },\n      features: {\n        newDesignLanguage\n      }\n    } = this.props;\n    const navClassName = classNames(styles.Navigation, showMobileNavigation && styles['Navigation-visible'], newDesignLanguage && styles['Navigation-newDesignLanguage']);\n    const mobileNavHidden = isNavigationCollapsed && !showMobileNavigation;\n    const mobileNavShowing = isNavigationCollapsed && showMobileNavigation;\n    const tabIndex = mobileNavShowing ? 0 : -1;\n    const navigationMarkup = navigation ? /*#__PURE__*/React$1.createElement(TrapFocus$1, {\n      trapping: mobileNavShowing\n    }, /*#__PURE__*/React$1.createElement(CSSTransition, {\n      nodeRef: this.navigationNode,\n      appear: isNavigationCollapsed,\n      exit: isNavigationCollapsed,\n      in: showMobileNavigation,\n      timeout: durationSlow,\n      classNames: navTransitionClasses\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      ref: this.navigationNode,\n      className: navClassName,\n      onKeyDown: this.handleNavKeydown,\n      id: APP_FRAME_NAV,\n      key: \"NavContent\",\n      hidden: mobileNavHidden\n    }, navigation, /*#__PURE__*/React$1.createElement(\"button\", {\n      type: \"button\",\n      className: styles.NavigationDismiss,\n      onClick: this.handleNavigationDismiss,\n      \"aria-hidden\": mobileNavHidden || !isNavigationCollapsed && !showMobileNavigation,\n      \"aria-label\": i18n.translate('Polaris.Frame.Navigation.closeMobileNavigationLabel'),\n      tabIndex: tabIndex\n    }, _ref)))) : null;\n    const loadingMarkup = loadingStack > 0 ? /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.LoadingBar,\n      id: APP_FRAME_LOADING_BAR\n    }, _ref2) : null;\n    const contextualSaveBarMarkup = /*#__PURE__*/React$1.createElement(CSSAnimation$1, {\n      in: showContextualSaveBar,\n      className: styles.ContextualSaveBar,\n      type: \"fade\"\n    }, /*#__PURE__*/React$1.createElement(ContextualSaveBar$1, this.contextualSaveBar));\n    const topBarClassName = classNames(styles.TopBar, newDesignLanguage && styles['TopBar-newDesignLanguage']);\n    const topBarMarkup = topBar ? /*#__PURE__*/React$1.createElement(\"div\", Object.assign({\n      className: topBarClassName\n    }, layer.props, dataPolarisTopBar.props, {\n      id: APP_FRAME_TOP_BAR\n    }), topBar) : null;\n    const globalRibbonClassName = classNames(styles.GlobalRibbonContainer, newDesignLanguage && styles['GlobalRibbonContainer-newDesignLanguage']);\n    const globalRibbonMarkup = globalRibbon ? /*#__PURE__*/React$1.createElement(\"div\", {\n      className: globalRibbonClassName,\n      ref: this.setGlobalRibbonContainer\n    }, globalRibbon) : null;\n    const skipClassName = classNames(styles.Skip, skipFocused && styles.focused);\n    const skipTarget = skipToContentTarget ? skipToContentTarget.current && skipToContentTarget.current.id || '' : APP_FRAME_MAIN_ANCHOR_TARGET;\n    const skipMarkup = /*#__PURE__*/React$1.createElement(\"div\", {\n      className: skipClassName\n    }, /*#__PURE__*/React$1.createElement(Button$1, {\n      url: `#${skipTarget}`,\n      onFocus: this.handleFocus,\n      onBlur: this.handleBlur,\n      onClick: this.handleClick\n    }, i18n.translate('Polaris.Frame.skipToContent')));\n    const navigationAttributes = navigation ? {\n      'data-has-navigation': true\n    } : {};\n    const frameClassName = classNames(styles.Frame, navigation && styles.hasNav, topBar && styles.hasTopBar);\n    const mainClassName = classNames(styles.Main, newDesignLanguage && styles['Main-newDesignLanguage']);\n    const navigationOverlayMarkup = showMobileNavigation && isNavigationCollapsed ? /*#__PURE__*/React$1.createElement(Backdrop$1, {\n      belowNavigation: true,\n      onClick: this.handleNavigationDismiss,\n      onTouchStart: this.handleNavigationDismiss\n    }) : null;\n    const skipToMainContentTarget = skipToContentTarget ? null :\n    /*#__PURE__*/\n    // eslint-disable-next-line jsx-a11y/anchor-is-valid\n    React$1.createElement(\"a\", {\n      id: APP_FRAME_MAIN_ANCHOR_TARGET,\n      ref: this.skipToMainContentTargetNode,\n      tabIndex: -1\n    });\n    const context = {\n      showToast: this.showToast,\n      hideToast: this.hideToast,\n      startLoading: this.startLoading,\n      stopLoading: this.stopLoading,\n      setContextualSaveBar: this.setContextualSaveBar,\n      removeContextualSaveBar: this.removeContextualSaveBar\n    };\n    return /*#__PURE__*/React$1.createElement(FrameContext.Provider, {\n      value: context\n    }, /*#__PURE__*/React$1.createElement(\"div\", Object.assign({\n      className: frameClassName\n    }, layer.props, navigationAttributes), skipMarkup, topBarMarkup, navigationMarkup, contextualSaveBarMarkup, loadingMarkup, navigationOverlayMarkup, /*#__PURE__*/React$1.createElement(\"main\", {\n      className: mainClassName,\n      id: APP_FRAME_MAIN,\n      \"data-has-global-ribbon\": Boolean(globalRibbon)\n    }, skipToMainContentTarget, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Content\n    }, children)), /*#__PURE__*/React$1.createElement(ToastManager$1, {\n      toastMessages: toastMessages\n    }), globalRibbonMarkup, /*#__PURE__*/React$1.createElement(EventListener$1, {\n      event: \"resize\",\n      handler: this.handleResize\n    })));\n  }\n\n}\n\nconst navTransitionClasses = {\n  enter: classNames(styles['Navigation-enter']),\n  enterActive: classNames(styles['Navigation-enterActive']),\n  enterDone: classNames(styles['Navigation-enterActive']),\n  exit: classNames(styles['Navigation-exit']),\n  exitActive: classNames(styles['Navigation-exitActive'])\n};\n\nfunction Frame(props) {\n  const i18n = useI18n();\n  const mediaQuery = useMediaQuery();\n  const features = useFeatures();\n  return /*#__PURE__*/React$1.createElement(FrameInner, Object.assign({}, props, {\n    i18n: i18n,\n    mediaQuery: mediaQuery,\n    features: features\n  }));\n}\n\nexport { Frame };","map":{"version":3,"sources":["/Users/timi/Desktop/typescript-test/node_modules/@shopify/polaris/dist/esm/components/Frame/Frame.js"],"names":["objectSpread2","_objectSpread2","React$1","PureComponent","createRef","durationSlow","useFeatures","useMediaQuery","EventListener","EventListener$1","useI18n","layer","dataPolarisTopBar","classNames","MobileCancelMajor","Icon","Icon$1","Button","Button$1","Backdrop","Backdrop$1","CSSTransition","FrameContext","TrapFocus","TrapFocus$1","setRootProperty","setRootProperty$1","ToastManager","ToastManager$1","Loading","Loading$1","ContextualSaveBar","ContextualSaveBar$1","CSSAnimation","CSSAnimation$1","styles","GLOBAL_RIBBON_CUSTOM_PROPERTY","APP_FRAME_MAIN","APP_FRAME_MAIN_ANCHOR_TARGET","APP_FRAME_NAV","APP_FRAME_TOP_BAR","APP_FRAME_LOADING_BAR","_ref","createElement","source","_ref2","FrameInner","constructor","args","state","skipFocused","globalRibbonHeight","loadingStack","toastMessages","showContextualSaveBar","contextualSaveBar","globalRibbonContainer","navigationNode","skipToMainContentTargetNode","props","skipToContentTarget","setGlobalRibbonHeight","setState","offsetHeight","setGlobalRibbonRootProperty","showToast","toast","hasToastById","find","id","hideToast","filter","toastId","setContextualSaveBar","forceUpdate","removeContextualSaveBar","startLoading","stopLoading","Math","max","handleResize","globalRibbon","handleFocus","handleBlur","handleClick","current","focus","handleNavigationDismiss","onNavigationDismiss","setGlobalRibbonContainer","node","handleNavKeydown","event","key","mediaQuery","isNavigationCollapsed","showMobileNavigation","mobileNavShowing","componentDidMount","componentDidUpdate","prevProps","render","children","navigation","topBar","i18n","features","newDesignLanguage","navClassName","Navigation","mobileNavHidden","tabIndex","navigationMarkup","trapping","nodeRef","appear","exit","in","timeout","navTransitionClasses","ref","className","onKeyDown","hidden","type","NavigationDismiss","onClick","translate","loadingMarkup","LoadingBar","contextualSaveBarMarkup","topBarClassName","TopBar","topBarMarkup","Object","assign","globalRibbonClassName","GlobalRibbonContainer","globalRibbonMarkup","skipClassName","Skip","focused","skipTarget","skipMarkup","url","onFocus","onBlur","navigationAttributes","frameClassName","Frame","hasNav","hasTopBar","mainClassName","Main","navigationOverlayMarkup","belowNavigation","onTouchStart","skipToMainContentTarget","context","Provider","value","Boolean","Content","handler","enter","enterActive","enterDone","exitActive"],"mappings":"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","sourcesContent":["import { objectSpread2 as _objectSpread2 } from '../../_virtual/_rollupPluginBabelHelpers.js';\nimport React$1, { PureComponent, createRef } from 'react';\nimport { durationSlow } from '@shopify/polaris-tokens';\nimport { useFeatures } from '../../utilities/features/hooks.js';\nimport { useMediaQuery } from '../../utilities/media-query/hooks.js';\nimport { EventListener as EventListener$1 } from '../EventListener/EventListener.js';\nimport { useI18n } from '../../utilities/i18n/hooks.js';\nimport { layer, dataPolarisTopBar } from '../shared.js';\nimport { classNames } from '../../utilities/css.js';\nimport { MobileCancelMajor } from '@shopify/polaris-icons';\nimport { Icon as Icon$1 } from '../Icon/Icon.js';\nimport { Button as Button$1 } from '../Button/Button.js';\nimport { Backdrop as Backdrop$1 } from '../Backdrop/Backdrop.js';\nimport { CSSTransition } from 'react-transition-group';\nimport { FrameContext } from '../../utilities/frame/context.js';\nimport { TrapFocus as TrapFocus$1 } from '../TrapFocus/TrapFocus.js';\nimport { setRootProperty as setRootProperty$1 } from '../../utilities/set-root-property.js';\nimport { ToastManager as ToastManager$1 } from './components/ToastManager/ToastManager.js';\nimport { Loading as Loading$1 } from './components/Loading/Loading.js';\nimport { ContextualSaveBar as ContextualSaveBar$1 } from './components/ContextualSaveBar/ContextualSaveBar.js';\nimport { CSSAnimation as CSSAnimation$1 } from './components/CSSAnimation/CSSAnimation.js';\nimport styles from './Frame.scss.js';\n\nconst GLOBAL_RIBBON_CUSTOM_PROPERTY = '--global-ribbon-height';\nconst APP_FRAME_MAIN = 'AppFrameMain';\nconst APP_FRAME_MAIN_ANCHOR_TARGET = 'AppFrameMainContent';\nconst APP_FRAME_NAV = 'AppFrameNav';\nconst APP_FRAME_TOP_BAR = 'AppFrameTopBar';\nconst APP_FRAME_LOADING_BAR = 'AppFrameLoadingBar';\n\nvar _ref = /*#__PURE__*/React$1.createElement(Icon$1, {\n  source: MobileCancelMajor\n});\n\nvar _ref2 = /*#__PURE__*/React$1.createElement(Loading$1, null);\n\nclass FrameInner extends PureComponent {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      skipFocused: false,\n      globalRibbonHeight: 0,\n      loadingStack: 0,\n      toastMessages: [],\n      showContextualSaveBar: false\n    };\n    this.contextualSaveBar = null;\n    this.globalRibbonContainer = null;\n    this.navigationNode = /*#__PURE__*/createRef();\n    this.skipToMainContentTargetNode = this.props.skipToContentTarget || /*#__PURE__*/createRef();\n\n    this.setGlobalRibbonHeight = () => {\n      const {\n        globalRibbonContainer\n      } = this;\n\n      if (globalRibbonContainer) {\n        this.setState({\n          globalRibbonHeight: globalRibbonContainer.offsetHeight\n        }, this.setGlobalRibbonRootProperty);\n      }\n    };\n\n    this.setGlobalRibbonRootProperty = () => {\n      const {\n        globalRibbonHeight\n      } = this.state;\n      setRootProperty$1(GLOBAL_RIBBON_CUSTOM_PROPERTY, `${globalRibbonHeight}px`, null);\n    };\n\n    this.showToast = toast => {\n      this.setState(({\n        toastMessages\n      }) => {\n        const hasToastById = toastMessages.find(({\n          id\n        }) => id === toast.id) != null;\n        return {\n          toastMessages: hasToastById ? toastMessages : [...toastMessages, toast]\n        };\n      });\n    };\n\n    this.hideToast = ({\n      id\n    }) => {\n      this.setState(({\n        toastMessages\n      }) => {\n        return {\n          toastMessages: toastMessages.filter(({\n            id: toastId\n          }) => id !== toastId)\n        };\n      });\n    };\n\n    this.setContextualSaveBar = props => {\n      const {\n        showContextualSaveBar\n      } = this.state;\n      this.contextualSaveBar = _objectSpread2({}, props);\n\n      if (showContextualSaveBar === true) {\n        this.forceUpdate();\n      } else {\n        this.setState({\n          showContextualSaveBar: true\n        });\n      }\n    };\n\n    this.removeContextualSaveBar = () => {\n      this.contextualSaveBar = null;\n      this.setState({\n        showContextualSaveBar: false\n      });\n    };\n\n    this.startLoading = () => {\n      this.setState(({\n        loadingStack\n      }) => ({\n        loadingStack: loadingStack + 1\n      }));\n    };\n\n    this.stopLoading = () => {\n      this.setState(({\n        loadingStack\n      }) => ({\n        loadingStack: Math.max(0, loadingStack - 1)\n      }));\n    };\n\n    this.handleResize = () => {\n      if (this.props.globalRibbon) {\n        this.setGlobalRibbonHeight();\n      }\n    };\n\n    this.handleFocus = () => {\n      this.setState({\n        skipFocused: true\n      });\n    };\n\n    this.handleBlur = () => {\n      this.setState({\n        skipFocused: false\n      });\n    };\n\n    this.handleClick = () => {\n      this.skipToMainContentTargetNode.current && this.skipToMainContentTargetNode.current.focus();\n    };\n\n    this.handleNavigationDismiss = () => {\n      const {\n        onNavigationDismiss\n      } = this.props;\n\n      if (onNavigationDismiss != null) {\n        onNavigationDismiss();\n      }\n    };\n\n    this.setGlobalRibbonContainer = node => {\n      this.globalRibbonContainer = node;\n    };\n\n    this.handleNavKeydown = event => {\n      const {\n        key\n      } = event;\n      const {\n        mediaQuery: {\n          isNavigationCollapsed\n        },\n        showMobileNavigation\n      } = this.props;\n      const mobileNavShowing = isNavigationCollapsed && showMobileNavigation;\n\n      if (mobileNavShowing && key === 'Escape') {\n        this.handleNavigationDismiss();\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.handleResize();\n\n    if (this.props.globalRibbon) {\n      return;\n    }\n\n    this.setGlobalRibbonRootProperty();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.globalRibbon !== prevProps.globalRibbon) {\n      this.setGlobalRibbonHeight();\n    }\n  }\n\n  render() {\n    const {\n      skipFocused,\n      loadingStack,\n      toastMessages,\n      showContextualSaveBar\n    } = this.state;\n    const {\n      children,\n      navigation,\n      topBar,\n      globalRibbon,\n      showMobileNavigation = false,\n      skipToContentTarget,\n      i18n,\n      mediaQuery: {\n        isNavigationCollapsed\n      },\n      features: {\n        newDesignLanguage\n      }\n    } = this.props;\n    const navClassName = classNames(styles.Navigation, showMobileNavigation && styles['Navigation-visible'], newDesignLanguage && styles['Navigation-newDesignLanguage']);\n    const mobileNavHidden = isNavigationCollapsed && !showMobileNavigation;\n    const mobileNavShowing = isNavigationCollapsed && showMobileNavigation;\n    const tabIndex = mobileNavShowing ? 0 : -1;\n    const navigationMarkup = navigation ? /*#__PURE__*/React$1.createElement(TrapFocus$1, {\n      trapping: mobileNavShowing\n    }, /*#__PURE__*/React$1.createElement(CSSTransition, {\n      nodeRef: this.navigationNode,\n      appear: isNavigationCollapsed,\n      exit: isNavigationCollapsed,\n      in: showMobileNavigation,\n      timeout: durationSlow,\n      classNames: navTransitionClasses\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      ref: this.navigationNode,\n      className: navClassName,\n      onKeyDown: this.handleNavKeydown,\n      id: APP_FRAME_NAV,\n      key: \"NavContent\",\n      hidden: mobileNavHidden\n    }, navigation, /*#__PURE__*/React$1.createElement(\"button\", {\n      type: \"button\",\n      className: styles.NavigationDismiss,\n      onClick: this.handleNavigationDismiss,\n      \"aria-hidden\": mobileNavHidden || !isNavigationCollapsed && !showMobileNavigation,\n      \"aria-label\": i18n.translate('Polaris.Frame.Navigation.closeMobileNavigationLabel'),\n      tabIndex: tabIndex\n    }, _ref)))) : null;\n    const loadingMarkup = loadingStack > 0 ? /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.LoadingBar,\n      id: APP_FRAME_LOADING_BAR\n    }, _ref2) : null;\n    const contextualSaveBarMarkup = /*#__PURE__*/React$1.createElement(CSSAnimation$1, {\n      in: showContextualSaveBar,\n      className: styles.ContextualSaveBar,\n      type: \"fade\"\n    }, /*#__PURE__*/React$1.createElement(ContextualSaveBar$1, this.contextualSaveBar));\n    const topBarClassName = classNames(styles.TopBar, newDesignLanguage && styles['TopBar-newDesignLanguage']);\n    const topBarMarkup = topBar ? /*#__PURE__*/React$1.createElement(\"div\", Object.assign({\n      className: topBarClassName\n    }, layer.props, dataPolarisTopBar.props, {\n      id: APP_FRAME_TOP_BAR\n    }), topBar) : null;\n    const globalRibbonClassName = classNames(styles.GlobalRibbonContainer, newDesignLanguage && styles['GlobalRibbonContainer-newDesignLanguage']);\n    const globalRibbonMarkup = globalRibbon ? /*#__PURE__*/React$1.createElement(\"div\", {\n      className: globalRibbonClassName,\n      ref: this.setGlobalRibbonContainer\n    }, globalRibbon) : null;\n    const skipClassName = classNames(styles.Skip, skipFocused && styles.focused);\n    const skipTarget = skipToContentTarget ? skipToContentTarget.current && skipToContentTarget.current.id || '' : APP_FRAME_MAIN_ANCHOR_TARGET;\n    const skipMarkup = /*#__PURE__*/React$1.createElement(\"div\", {\n      className: skipClassName\n    }, /*#__PURE__*/React$1.createElement(Button$1, {\n      url: `#${skipTarget}`,\n      onFocus: this.handleFocus,\n      onBlur: this.handleBlur,\n      onClick: this.handleClick\n    }, i18n.translate('Polaris.Frame.skipToContent')));\n    const navigationAttributes = navigation ? {\n      'data-has-navigation': true\n    } : {};\n    const frameClassName = classNames(styles.Frame, navigation && styles.hasNav, topBar && styles.hasTopBar);\n    const mainClassName = classNames(styles.Main, newDesignLanguage && styles['Main-newDesignLanguage']);\n    const navigationOverlayMarkup = showMobileNavigation && isNavigationCollapsed ? /*#__PURE__*/React$1.createElement(Backdrop$1, {\n      belowNavigation: true,\n      onClick: this.handleNavigationDismiss,\n      onTouchStart: this.handleNavigationDismiss\n    }) : null;\n    const skipToMainContentTarget = skipToContentTarget ? null :\n    /*#__PURE__*/\n    // eslint-disable-next-line jsx-a11y/anchor-is-valid\n    React$1.createElement(\"a\", {\n      id: APP_FRAME_MAIN_ANCHOR_TARGET,\n      ref: this.skipToMainContentTargetNode,\n      tabIndex: -1\n    });\n    const context = {\n      showToast: this.showToast,\n      hideToast: this.hideToast,\n      startLoading: this.startLoading,\n      stopLoading: this.stopLoading,\n      setContextualSaveBar: this.setContextualSaveBar,\n      removeContextualSaveBar: this.removeContextualSaveBar\n    };\n    return /*#__PURE__*/React$1.createElement(FrameContext.Provider, {\n      value: context\n    }, /*#__PURE__*/React$1.createElement(\"div\", Object.assign({\n      className: frameClassName\n    }, layer.props, navigationAttributes), skipMarkup, topBarMarkup, navigationMarkup, contextualSaveBarMarkup, loadingMarkup, navigationOverlayMarkup, /*#__PURE__*/React$1.createElement(\"main\", {\n      className: mainClassName,\n      id: APP_FRAME_MAIN,\n      \"data-has-global-ribbon\": Boolean(globalRibbon)\n    }, skipToMainContentTarget, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Content\n    }, children)), /*#__PURE__*/React$1.createElement(ToastManager$1, {\n      toastMessages: toastMessages\n    }), globalRibbonMarkup, /*#__PURE__*/React$1.createElement(EventListener$1, {\n      event: \"resize\",\n      handler: this.handleResize\n    })));\n  }\n\n}\n\nconst navTransitionClasses = {\n  enter: classNames(styles['Navigation-enter']),\n  enterActive: classNames(styles['Navigation-enterActive']),\n  enterDone: classNames(styles['Navigation-enterActive']),\n  exit: classNames(styles['Navigation-exit']),\n  exitActive: classNames(styles['Navigation-exitActive'])\n};\nfunction Frame(props) {\n  const i18n = useI18n();\n  const mediaQuery = useMediaQuery();\n  const features = useFeatures();\n  return /*#__PURE__*/React$1.createElement(FrameInner, Object.assign({}, props, {\n    i18n: i18n,\n    mediaQuery: mediaQuery,\n    features: features\n  }));\n}\n\nexport { Frame };\n"]},"metadata":{},"sourceType":"module"}