{"ast":null,"code":"import React$1, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useFeatures } from '../../utilities/features/hooks.js';\nimport { useI18n } from '../../utilities/i18n/hooks.js';\nimport { classNames } from '../../utilities/css.js';\nimport { ArrowLeftMinor, ArrowRightMinor } from '@shopify/polaris-icons';\nimport { Button as Button$1 } from '../Button/Button.js';\nimport { isDateBefore, isDateAfter, getNextDisplayYear, getNextDisplayMonth, getPreviousDisplayYear, getPreviousDisplayMonth } from '../../utilities/dates.js';\nimport { monthName } from './utilities.js';\nimport styles from './DatePicker.scss.js';\nimport { Month as Month$1 } from './components/Month/Month.js';\n\nfunction DatePicker({\n  id,\n  selected,\n  month,\n  year,\n  allowRange,\n  multiMonth,\n  disableDatesBefore,\n  disableDatesAfter,\n  weekStartsOn = 0,\n  onMonthChange,\n  onChange = noop\n}) {\n  const i18n = useI18n();\n  const {\n    newDesignLanguage\n  } = useFeatures();\n  const [hoverDate, setHoverDate] = useState(undefined);\n  const [focusDate, setFocusDate] = useState(undefined);\n  useEffect(() => {\n    setFocusDate(undefined);\n  }, [selected]);\n  const handleFocus = useCallback(date => {\n    setFocusDate(date);\n  }, []);\n  const setFocusDateAndHandleMonthChange = useCallback(date => {\n    if (onMonthChange) {\n      onMonthChange(date.getMonth(), date.getFullYear());\n    }\n\n    setHoverDate(date);\n    setFocusDate(date);\n  }, [onMonthChange]);\n  const handleDateSelection = useCallback(range => {\n    const {\n      end\n    } = range;\n    setHoverDate(end);\n    setFocusDate(new Date(end));\n    onChange(range);\n  }, [onChange]);\n  const handleMonthChangeClick = useCallback((month, year) => {\n    if (!onMonthChange) {\n      return;\n    }\n\n    setFocusDate(undefined);\n    onMonthChange(month, year);\n  }, [onMonthChange]);\n  const handleHover = useCallback(date => {\n    setHoverDate(date);\n  }, []);\n  const handleKeyUp = useCallback(event => {\n    const {\n      key\n    } = event;\n    const range = deriveRange(selected);\n    const focusedDate = focusDate || range && range.start;\n\n    if (focusedDate == null) {\n      return;\n    }\n\n    if (key === 'ArrowUp') {\n      const previousWeek = new Date(focusedDate);\n      previousWeek.setDate(focusedDate.getDate() - 7);\n\n      if (!(disableDatesBefore && isDateBefore(previousWeek, disableDatesBefore))) {\n        setFocusDateAndHandleMonthChange(previousWeek);\n      }\n    }\n\n    if (key === 'ArrowDown') {\n      const nextWeek = new Date(focusedDate);\n      nextWeek.setDate(focusedDate.getDate() + 7);\n\n      if (!(disableDatesAfter && isDateAfter(nextWeek, disableDatesAfter))) {\n        setFocusDateAndHandleMonthChange(nextWeek);\n      }\n    }\n\n    if (key === 'ArrowRight') {\n      const tomorrow = new Date(focusedDate);\n      tomorrow.setDate(focusedDate.getDate() + 1);\n\n      if (!(disableDatesAfter && isDateAfter(tomorrow, disableDatesAfter))) {\n        setFocusDateAndHandleMonthChange(tomorrow);\n      }\n    }\n\n    if (key === 'ArrowLeft') {\n      const yesterday = new Date(focusedDate);\n      yesterday.setDate(focusedDate.getDate() - 1);\n\n      if (!(disableDatesBefore && isDateBefore(yesterday, disableDatesBefore))) {\n        setFocusDateAndHandleMonthChange(yesterday);\n      }\n    }\n  }, [disableDatesAfter, disableDatesBefore, focusDate, selected, setFocusDateAndHandleMonthChange]);\n  const showNextYear = getNextDisplayYear(month, year);\n  const showNextMonth = getNextDisplayMonth(month);\n  const showNextToNextYear = getNextDisplayYear(showNextMonth, showNextYear);\n  const showNextToNextMonth = getNextDisplayMonth(showNextMonth);\n  const showPreviousYear = getPreviousDisplayYear(month, year);\n  const showPreviousMonth = getPreviousDisplayMonth(month);\n  const previousMonthName = i18n.translate(`Polaris.DatePicker.months.${monthName(showPreviousMonth)}`);\n  const nextMonth = multiMonth ? i18n.translate(`Polaris.DatePicker.months.${monthName(showNextToNextMonth)}`) : i18n.translate(`Polaris.DatePicker.months.${monthName(showNextMonth)}`);\n  const nextYear = multiMonth ? showNextToNextYear : showNextYear;\n  const monthIsSelected = useMemo(() => deriveRange(selected), [selected]);\n  const secondDatePicker = multiMonth ? /*#__PURE__*/React$1.createElement(Month$1, {\n    onFocus: handleFocus,\n    focusedDate: focusDate,\n    month: showNextMonth,\n    year: showNextYear,\n    selected: monthIsSelected,\n    hoverDate: hoverDate,\n    onChange: handleDateSelection,\n    onHover: handleHover,\n    disableDatesBefore: disableDatesBefore,\n    disableDatesAfter: disableDatesAfter,\n    allowRange: allowRange,\n    weekStartsOn: weekStartsOn\n  }) : null;\n  const datePickerClassName = classNames(styles.DatePicker, newDesignLanguage && styles.newDesignLanguage);\n  return /*#__PURE__*/React$1.createElement(\"div\", {\n    id: id,\n    className: datePickerClassName,\n    onKeyDown: handleKeyDown,\n    onKeyUp: handleKeyUp\n  }, /*#__PURE__*/React$1.createElement(\"div\", {\n    className: styles.Header\n  }, /*#__PURE__*/React$1.createElement(Button$1, {\n    plain: true,\n    icon: ArrowLeftMinor,\n    accessibilityLabel: i18n.translate('Polaris.DatePicker.previousMonth', {\n      previousMonthName,\n      showPreviousYear\n    }),\n    onClick: () => handleMonthChangeClick(showPreviousMonth, showPreviousYear)\n  }), /*#__PURE__*/React$1.createElement(Button$1, {\n    plain: true,\n    icon: ArrowRightMinor,\n    accessibilityLabel: i18n.translate('Polaris.DatePicker.nextMonth', {\n      nextMonth,\n      nextYear\n    }),\n    onClick: () => handleMonthChangeClick(showNextMonth, showNextYear)\n  })), /*#__PURE__*/React$1.createElement(\"div\", {\n    className: styles.MonthLayout\n  }, /*#__PURE__*/React$1.createElement(Month$1, {\n    onFocus: handleFocus,\n    focusedDate: focusDate,\n    month: month,\n    year: year,\n    selected: deriveRange(selected),\n    hoverDate: hoverDate,\n    onChange: handleDateSelection,\n    onHover: handleHover,\n    disableDatesBefore: disableDatesBefore,\n    disableDatesAfter: disableDatesAfter,\n    allowRange: allowRange,\n    weekStartsOn: weekStartsOn\n  }), secondDatePicker));\n}\n\nfunction noop() {}\n\nfunction handleKeyDown(event) {\n  const {\n    key\n  } = event;\n\n  if (key === 'ArrowUp' || key === 'ArrowDown' || key === 'ArrowLeft' || key === 'ArrowRight') {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n}\n\nfunction deriveRange(selected) {\n  return selected instanceof Date ? {\n    start: selected,\n    end: selected\n  } : selected;\n}\n\nexport { DatePicker };","map":{"version":3,"sources":["/Users/timi/Desktop/typescript-test/node_modules/@shopify/polaris/dist/esm/components/DatePicker/DatePicker.js"],"names":["React$1","useState","useEffect","useCallback","useMemo","useFeatures","useI18n","classNames","ArrowLeftMinor","ArrowRightMinor","Button","Button$1","isDateBefore","isDateAfter","getNextDisplayYear","getNextDisplayMonth","getPreviousDisplayYear","getPreviousDisplayMonth","monthName","styles","Month","Month$1","DatePicker","id","selected","month","year","allowRange","multiMonth","disableDatesBefore","disableDatesAfter","weekStartsOn","onMonthChange","onChange","noop","i18n","newDesignLanguage","hoverDate","setHoverDate","undefined","focusDate","setFocusDate","handleFocus","date","setFocusDateAndHandleMonthChange","getMonth","getFullYear","handleDateSelection","range","end","Date","handleMonthChangeClick","handleHover","handleKeyUp","event","key","deriveRange","focusedDate","start","previousWeek","setDate","getDate","nextWeek","tomorrow","yesterday","showNextYear","showNextMonth","showNextToNextYear","showNextToNextMonth","showPreviousYear","showPreviousMonth","previousMonthName","translate","nextMonth","nextYear","monthIsSelected","secondDatePicker","createElement","onFocus","onHover","datePickerClassName","className","onKeyDown","handleKeyDown","onKeyUp","Header","plain","icon","accessibilityLabel","onClick","MonthLayout","preventDefault","stopPropagation"],"mappings":"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","sourcesContent":["import React$1, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useFeatures } from '../../utilities/features/hooks.js';\nimport { useI18n } from '../../utilities/i18n/hooks.js';\nimport { classNames } from '../../utilities/css.js';\nimport { ArrowLeftMinor, ArrowRightMinor } from '@shopify/polaris-icons';\nimport { Button as Button$1 } from '../Button/Button.js';\nimport { isDateBefore, isDateAfter, getNextDisplayYear, getNextDisplayMonth, getPreviousDisplayYear, getPreviousDisplayMonth } from '../../utilities/dates.js';\nimport { monthName } from './utilities.js';\nimport styles from './DatePicker.scss.js';\nimport { Month as Month$1 } from './components/Month/Month.js';\n\nfunction DatePicker({\n  id,\n  selected,\n  month,\n  year,\n  allowRange,\n  multiMonth,\n  disableDatesBefore,\n  disableDatesAfter,\n  weekStartsOn = 0,\n  onMonthChange,\n  onChange = noop\n}) {\n  const i18n = useI18n();\n  const {\n    newDesignLanguage\n  } = useFeatures();\n  const [hoverDate, setHoverDate] = useState(undefined);\n  const [focusDate, setFocusDate] = useState(undefined);\n  useEffect(() => {\n    setFocusDate(undefined);\n  }, [selected]);\n  const handleFocus = useCallback(date => {\n    setFocusDate(date);\n  }, []);\n  const setFocusDateAndHandleMonthChange = useCallback(date => {\n    if (onMonthChange) {\n      onMonthChange(date.getMonth(), date.getFullYear());\n    }\n\n    setHoverDate(date);\n    setFocusDate(date);\n  }, [onMonthChange]);\n  const handleDateSelection = useCallback(range => {\n    const {\n      end\n    } = range;\n    setHoverDate(end);\n    setFocusDate(new Date(end));\n    onChange(range);\n  }, [onChange]);\n  const handleMonthChangeClick = useCallback((month, year) => {\n    if (!onMonthChange) {\n      return;\n    }\n\n    setFocusDate(undefined);\n    onMonthChange(month, year);\n  }, [onMonthChange]);\n  const handleHover = useCallback(date => {\n    setHoverDate(date);\n  }, []);\n  const handleKeyUp = useCallback(event => {\n    const {\n      key\n    } = event;\n    const range = deriveRange(selected);\n    const focusedDate = focusDate || range && range.start;\n\n    if (focusedDate == null) {\n      return;\n    }\n\n    if (key === 'ArrowUp') {\n      const previousWeek = new Date(focusedDate);\n      previousWeek.setDate(focusedDate.getDate() - 7);\n\n      if (!(disableDatesBefore && isDateBefore(previousWeek, disableDatesBefore))) {\n        setFocusDateAndHandleMonthChange(previousWeek);\n      }\n    }\n\n    if (key === 'ArrowDown') {\n      const nextWeek = new Date(focusedDate);\n      nextWeek.setDate(focusedDate.getDate() + 7);\n\n      if (!(disableDatesAfter && isDateAfter(nextWeek, disableDatesAfter))) {\n        setFocusDateAndHandleMonthChange(nextWeek);\n      }\n    }\n\n    if (key === 'ArrowRight') {\n      const tomorrow = new Date(focusedDate);\n      tomorrow.setDate(focusedDate.getDate() + 1);\n\n      if (!(disableDatesAfter && isDateAfter(tomorrow, disableDatesAfter))) {\n        setFocusDateAndHandleMonthChange(tomorrow);\n      }\n    }\n\n    if (key === 'ArrowLeft') {\n      const yesterday = new Date(focusedDate);\n      yesterday.setDate(focusedDate.getDate() - 1);\n\n      if (!(disableDatesBefore && isDateBefore(yesterday, disableDatesBefore))) {\n        setFocusDateAndHandleMonthChange(yesterday);\n      }\n    }\n  }, [disableDatesAfter, disableDatesBefore, focusDate, selected, setFocusDateAndHandleMonthChange]);\n  const showNextYear = getNextDisplayYear(month, year);\n  const showNextMonth = getNextDisplayMonth(month);\n  const showNextToNextYear = getNextDisplayYear(showNextMonth, showNextYear);\n  const showNextToNextMonth = getNextDisplayMonth(showNextMonth);\n  const showPreviousYear = getPreviousDisplayYear(month, year);\n  const showPreviousMonth = getPreviousDisplayMonth(month);\n  const previousMonthName = i18n.translate(`Polaris.DatePicker.months.${monthName(showPreviousMonth)}`);\n  const nextMonth = multiMonth ? i18n.translate(`Polaris.DatePicker.months.${monthName(showNextToNextMonth)}`) : i18n.translate(`Polaris.DatePicker.months.${monthName(showNextMonth)}`);\n  const nextYear = multiMonth ? showNextToNextYear : showNextYear;\n  const monthIsSelected = useMemo(() => deriveRange(selected), [selected]);\n  const secondDatePicker = multiMonth ? /*#__PURE__*/React$1.createElement(Month$1, {\n    onFocus: handleFocus,\n    focusedDate: focusDate,\n    month: showNextMonth,\n    year: showNextYear,\n    selected: monthIsSelected,\n    hoverDate: hoverDate,\n    onChange: handleDateSelection,\n    onHover: handleHover,\n    disableDatesBefore: disableDatesBefore,\n    disableDatesAfter: disableDatesAfter,\n    allowRange: allowRange,\n    weekStartsOn: weekStartsOn\n  }) : null;\n  const datePickerClassName = classNames(styles.DatePicker, newDesignLanguage && styles.newDesignLanguage);\n  return /*#__PURE__*/React$1.createElement(\"div\", {\n    id: id,\n    className: datePickerClassName,\n    onKeyDown: handleKeyDown,\n    onKeyUp: handleKeyUp\n  }, /*#__PURE__*/React$1.createElement(\"div\", {\n    className: styles.Header\n  }, /*#__PURE__*/React$1.createElement(Button$1, {\n    plain: true,\n    icon: ArrowLeftMinor,\n    accessibilityLabel: i18n.translate('Polaris.DatePicker.previousMonth', {\n      previousMonthName,\n      showPreviousYear\n    }),\n    onClick: () => handleMonthChangeClick(showPreviousMonth, showPreviousYear)\n  }), /*#__PURE__*/React$1.createElement(Button$1, {\n    plain: true,\n    icon: ArrowRightMinor,\n    accessibilityLabel: i18n.translate('Polaris.DatePicker.nextMonth', {\n      nextMonth,\n      nextYear\n    }),\n    onClick: () => handleMonthChangeClick(showNextMonth, showNextYear)\n  })), /*#__PURE__*/React$1.createElement(\"div\", {\n    className: styles.MonthLayout\n  }, /*#__PURE__*/React$1.createElement(Month$1, {\n    onFocus: handleFocus,\n    focusedDate: focusDate,\n    month: month,\n    year: year,\n    selected: deriveRange(selected),\n    hoverDate: hoverDate,\n    onChange: handleDateSelection,\n    onHover: handleHover,\n    disableDatesBefore: disableDatesBefore,\n    disableDatesAfter: disableDatesAfter,\n    allowRange: allowRange,\n    weekStartsOn: weekStartsOn\n  }), secondDatePicker));\n}\n\nfunction noop() {}\n\nfunction handleKeyDown(event) {\n  const {\n    key\n  } = event;\n\n  if (key === 'ArrowUp' || key === 'ArrowDown' || key === 'ArrowLeft' || key === 'ArrowRight') {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n}\n\nfunction deriveRange(selected) {\n  return selected instanceof Date ? {\n    start: selected,\n    end: selected\n  } : selected;\n}\n\nexport { DatePicker };\n"]},"metadata":{},"sourceType":"module"}