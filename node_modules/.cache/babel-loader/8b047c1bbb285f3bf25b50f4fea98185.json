{"ast":null,"code":"import { Key } from '../../types.js';\nimport React$1, { Component, createRef } from 'react';\nimport { useFeatures } from '../../utilities/features/hooks.js';\nimport { useMediaQuery } from '../../utilities/media-query/hooks.js';\nimport { useI18n } from '../../utilities/i18n/hooks.js';\nimport { classNames } from '../../utilities/css.js';\nimport { CancelSmallMinor, SearchMinor, ChevronUpMinor, ChevronDownMinor } from '@shopify/polaris-icons';\nimport { focusFirstFocusableNode } from '../../utilities/focus.js';\nimport { Icon as Icon$1 } from '../Icon/Icon.js';\nimport { Scrollable as Scrollable$1 } from '../Scrollable/Scrollable.js';\nimport { KeypressListener as KeypressListener$1 } from '../KeypressListener/KeypressListener.js';\nimport { WithinFilterContext } from '../../utilities/within-filter-context.js';\nimport { Badge as Badge$1 } from '../Badge/Badge.js';\nimport { TextStyle as TextStyle$1 } from '../TextStyle/TextStyle.js';\nimport { Button as Button$1 } from '../Button/Button.js';\nimport { Stack as Stack$1 } from '../Stack/Stack.js';\nimport { TextField as TextField$1 } from '../TextField/TextField.js';\nimport { ScrollLock as ScrollLock$1 } from '../ScrollLock/ScrollLock.js';\nimport { ResourceListContext } from '../../utilities/resource-list/context.js';\nimport { Collapsible as Collapsible$1 } from '../Collapsible/Collapsible.js';\nimport { DisplayText as DisplayText$1 } from '../DisplayText/DisplayText.js';\nimport { Tag as Tag$1 } from '../Tag/Tag.js';\nimport { Focus as Focus$1 } from '../Focus/Focus.js';\nimport { Sheet as Sheet$1 } from '../Sheet/Sheet.js';\nimport { ConnectedFilterControl as ConnectedFilterControl$1 } from './components/ConnectedFilterControl/ConnectedFilterControl.js';\nimport styles from './Filters.scss.js';\nvar Suffix;\n\n(function (Suffix) {\n  Suffix[\"Filter\"] = \"Filter\";\n  Suffix[\"Shortcut\"] = \"Shortcut\";\n})(Suffix || (Suffix = {}));\n\nvar _ref = /*#__PURE__*/React$1.createElement(ScrollLock$1, null);\n\nvar _ref2 = /*#__PURE__*/React$1.createElement(Icon$1, {\n  source: SearchMinor\n});\n\nclass FiltersInner extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      open: false,\n      readyForFocus: false\n    };\n    this.moreFiltersButtonContainer = /*#__PURE__*/createRef();\n    this.focusNode = /*#__PURE__*/createRef();\n\n    this.closeFilters = () => {\n      this.setState({\n        open: false\n      }, () => {\n        if (this.moreFiltersButtonContainer.current) {\n          focusFirstFocusableNode(this.moreFiltersButtonContainer.current, false);\n        }\n      });\n    };\n\n    this.toggleFilters = () => {\n      if (this.state.open === true) {\n        this.closeFilters();\n      } else {\n        this.openFilters();\n      }\n    };\n\n    this.setReadyForFocus = newState => () => {\n      this.setState({\n        readyForFocus: newState\n      });\n    };\n  }\n\n  render() {\n    const {\n      filters,\n      queryValue,\n      onQueryBlur,\n      onQueryChange,\n      onQueryFocus,\n      focused,\n      onClearAll,\n      appliedFilters,\n      onQueryClear,\n      queryPlaceholder,\n      children,\n      disabled = false,\n      helpText,\n      hideTags,\n      features: {\n        newDesignLanguage\n      },\n      i18n,\n      mediaQuery: {\n        isNavigationCollapsed\n      }\n    } = this.props;\n    const {\n      resourceName\n    } = this.context;\n    const {\n      open,\n      readyForFocus\n    } = this.state;\n    const backdropMarkup = open ? /*#__PURE__*/React$1.createElement(React$1.Fragment, null, _ref, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Backdrop,\n      onClick: this.closeFilters\n    })) : null;\n    const filtersContentMarkup = filters.map((filter, index) => {\n      const filterIsOpen = this.state[`${filter.key}${Suffix.Filter}`] === true;\n      const icon = filterIsOpen ? ChevronUpMinor : ChevronDownMinor;\n      const className = classNames(styles.FilterTriggerContainer, filterIsOpen && styles.open, index === 0 && styles.first, filters.length !== 1 && index === filters.length - 1 && styles.last);\n      const appliedFilterContent = this.getAppliedFilterContent(filter.key);\n      const appliedFilterBadgeMarkup = appliedFilterContent ? /*#__PURE__*/React$1.createElement(\"div\", {\n        className: styles.AppliedFilterBadgeContainer\n      }, /*#__PURE__*/React$1.createElement(Badge$1, {\n        size: \"small\",\n        status: \"new\"\n      }, appliedFilterContent)) : null;\n      const collapsibleID = `${filter.key}Collapsible`;\n      const buttonClassName = classNames(styles.FilterTrigger, newDesignLanguage && styles.newDesignLanguage);\n      return /*#__PURE__*/React$1.createElement(\"div\", {\n        key: filter.key,\n        className: className\n      }, /*#__PURE__*/React$1.createElement(\"button\", {\n        onClick: () => this.toggleFilter(filter.key),\n        className: buttonClassName,\n        id: `${filter.key}ToggleButton`,\n        type: \"button\",\n        \"aria-controls\": collapsibleID,\n        \"aria-expanded\": filterIsOpen\n      }, /*#__PURE__*/React$1.createElement(\"div\", {\n        className: styles.FilterTriggerLabelContainer\n      }, /*#__PURE__*/React$1.createElement(\"h2\", {\n        className: styles.FilterTriggerTitle\n      }, /*#__PURE__*/React$1.createElement(TextStyle$1, {\n        variation: this.props.disabled || filter.disabled ? 'subdued' : undefined\n      }, filter.label)), /*#__PURE__*/React$1.createElement(\"span\", {\n        className: styles.FilterTriggerIcon\n      }, /*#__PURE__*/React$1.createElement(Icon$1, {\n        source: icon,\n        color: \"inkLightest\"\n      }))), appliedFilterBadgeMarkup), /*#__PURE__*/React$1.createElement(Collapsible$1, {\n        id: collapsibleID,\n        open: filterIsOpen\n      }, /*#__PURE__*/React$1.createElement(\"div\", {\n        className: styles.FilterNodeContainer\n      }, /*#__PURE__*/React$1.createElement(Focus$1, {\n        disabled: !filterIsOpen || !readyForFocus || !open,\n        root: this.focusNode\n      }, this.generateFilterMarkup(filter)))));\n    });\n    const appliedFiltersCount = appliedFilters ? appliedFilters.length : 0;\n    const moreFiltersLabel = hideTags && appliedFiltersCount > 0 ? i18n.translate('Polaris.Filters.moreFiltersWithCount', {\n      count: appliedFiltersCount\n    }) : i18n.translate('Polaris.Filters.moreFilters');\n    const rightActionMarkup = /*#__PURE__*/React$1.createElement(\"div\", {\n      ref: this.moreFiltersButtonContainer\n    }, /*#__PURE__*/React$1.createElement(Button$1, {\n      onClick: this.toggleFilters,\n      disabled: disabled\n    }, moreFiltersLabel));\n    const filterResourceName = resourceName || {\n      singular: i18n.translate('Polaris.ResourceList.defaultItemSingular'),\n      plural: i18n.translate('Polaris.ResourceList.defaultItemPlural')\n    };\n    const transformedFilters = this.transformFilters(filters);\n    const filtersControlMarkup = /*#__PURE__*/React$1.createElement(ConnectedFilterControl$1, {\n      rightPopoverableActions: transformedFilters,\n      rightAction: rightActionMarkup,\n      auxiliary: children,\n      disabled: disabled,\n      forceShowMorefiltersButton: filters.length > transformedFilters.length\n    }, /*#__PURE__*/React$1.createElement(TextField$1, {\n      placeholder: queryPlaceholder || i18n.translate('Polaris.Filters.filter', {\n        resourceName: filterResourceName.plural\n      }),\n      onChange: onQueryChange,\n      onBlur: onQueryBlur,\n      onFocus: onQueryFocus,\n      value: queryValue,\n      focused: focused,\n      label: queryPlaceholder || i18n.translate('Polaris.Filters.filter', {\n        resourceName: filterResourceName.plural\n      }),\n      labelHidden: true,\n      prefix: /*#__PURE__*/React$1.createElement(\"span\", {\n        className: styles.SearchIcon\n      }, _ref2),\n      clearButton: true,\n      onClearButtonClick: onQueryClear,\n      disabled: disabled\n    }));\n    const filtersContainerHeaderClassname = classNames(styles.FiltersContainerHeader, newDesignLanguage && styles.newDesignLanguage);\n    const filtersDesktopHeaderMarkup = /*#__PURE__*/React$1.createElement(\"div\", {\n      className: filtersContainerHeaderClassname\n    }, /*#__PURE__*/React$1.createElement(DisplayText$1, {\n      size: \"small\"\n    }, moreFiltersLabel), /*#__PURE__*/React$1.createElement(Button$1, {\n      icon: CancelSmallMinor,\n      plain: true,\n      accessibilityLabel: i18n.translate('Polaris.Filters.cancel'),\n      onClick: this.closeFilters\n    }));\n    const filtersMobileHeaderMarkup = /*#__PURE__*/React$1.createElement(\"div\", {\n      className: filtersContainerHeaderClassname\n    }, /*#__PURE__*/React$1.createElement(Button$1, {\n      icon: CancelSmallMinor,\n      plain: true,\n      accessibilityLabel: i18n.translate('Polaris.Filters.cancel'),\n      onClick: this.closeFilters\n    }), /*#__PURE__*/React$1.createElement(DisplayText$1, {\n      size: \"small\"\n    }, moreFiltersLabel), /*#__PURE__*/React$1.createElement(Button$1, {\n      onClick: this.closeFilters,\n      primary: true\n    }, i18n.translate('Polaris.Filters.done')));\n    const filtersDesktopFooterClassname = classNames(styles.FiltersContainerFooter, newDesignLanguage && styles.newDesignLanguage);\n    const filtersDesktopFooterMarkup = /*#__PURE__*/React$1.createElement(\"div\", {\n      className: filtersDesktopFooterClassname\n    }, /*#__PURE__*/React$1.createElement(Button$1, {\n      onClick: onClearAll,\n      disabled: !this.hasAppliedFilters()\n    }, i18n.translate('Polaris.Filters.clearAllFilters')), /*#__PURE__*/React$1.createElement(Button$1, {\n      onClick: this.closeFilters,\n      primary: true\n    }, i18n.translate('Polaris.Filters.done')));\n    const filtersMobileFooterMarkup = /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.FiltersMobileContainerFooter\n    }, this.hasAppliedFilters() ? /*#__PURE__*/React$1.createElement(Button$1, {\n      onClick: onClearAll,\n      fullWidth: true\n    }, i18n.translate('Polaris.Filters.clearAllFilters')) : /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.EmptyFooterState\n    }, /*#__PURE__*/React$1.createElement(TextStyle$1, {\n      variation: \"subdued\"\n    }, /*#__PURE__*/React$1.createElement(\"p\", null, i18n.translate('Polaris.Filters.noFiltersApplied')))));\n    const tagsMarkup = !hideTags && appliedFilters && appliedFilters.length ? /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.TagsContainer\n    }, appliedFilters.map(filter => {\n      return /*#__PURE__*/React$1.createElement(Tag$1, {\n        key: filter.key,\n        onRemove: () => {\n          filter.onRemove(filter.key);\n        },\n        disabled: disabled\n      }, filter.label);\n    })) : null;\n    const filtersMobileContainerContentClassName = classNames(styles.FiltersMobileContainerContent, newDesignLanguage && styles.newDesignLanguage);\n    const filtersDesktopContainerContentClassName = classNames(styles.FiltersDesktopContainerContent, newDesignLanguage && styles.newDesignLanguage);\n    const filtersContainerMarkup = isNavigationCollapsed ? /*#__PURE__*/React$1.createElement(Sheet$1, {\n      open: open,\n      onClose: this.closeFilters,\n      onEntered: this.setReadyForFocus(true),\n      onExit: this.setReadyForFocus(false)\n    }, filtersMobileHeaderMarkup, /*#__PURE__*/React$1.createElement(Scrollable$1, {\n      className: filtersMobileContainerContentClassName,\n      shadow: true\n    }, filtersContentMarkup, filtersMobileFooterMarkup)) : /*#__PURE__*/React$1.createElement(Sheet$1, {\n      open: open,\n      onClose: this.closeFilters,\n      onEntered: this.setReadyForFocus(true),\n      onExit: this.setReadyForFocus(false)\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.FiltersContainer\n    }, filtersDesktopHeaderMarkup, /*#__PURE__*/React$1.createElement(Scrollable$1, {\n      className: filtersDesktopContainerContentClassName,\n      shadow: true\n    }, filtersContentMarkup), filtersDesktopFooterMarkup));\n    const helpTextMarkup = helpText ? /*#__PURE__*/React$1.createElement(\"div\", {\n      id: \"FiltersHelpText\",\n      className: styles.HelpText\n    }, /*#__PURE__*/React$1.createElement(TextStyle$1, {\n      variation: \"subdued\"\n    }, helpText)) : null;\n    return /*#__PURE__*/React$1.createElement(WithinFilterContext.Provider, {\n      value: true\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Filters\n    }, filtersControlMarkup, filtersContainerMarkup, tagsMarkup, helpTextMarkup, backdropMarkup, /*#__PURE__*/React$1.createElement(KeypressListener$1, {\n      keyCode: Key.Escape,\n      handler: this.closeFilters\n    })));\n  }\n\n  hasAppliedFilters() {\n    const {\n      appliedFilters,\n      queryValue\n    } = this.props;\n    const filtersApplied = Boolean(appliedFilters && appliedFilters.length > 0);\n    const queryApplied = Boolean(queryValue && queryValue !== '');\n    return filtersApplied || queryApplied;\n  }\n\n  getAppliedFilterContent(key) {\n    const {\n      appliedFilters\n    } = this.props;\n\n    if (!appliedFilters) {\n      return undefined;\n    }\n\n    const filter = appliedFilters.find(filter => filter.key === key);\n    return filter == null ? undefined : filter.label;\n  }\n\n  getAppliedFilterRemoveHandler(key) {\n    const {\n      appliedFilters\n    } = this.props;\n\n    if (!appliedFilters) {\n      return undefined;\n    }\n\n    const filter = appliedFilters.find(filter => filter.key === key);\n    return filter == null ? undefined : filter.onRemove;\n  }\n\n  openFilters() {\n    this.setState({\n      open: true\n    });\n  }\n\n  openFilter(key) {\n    this.setState({\n      [`${key}${Suffix.Filter}`]: true\n    });\n  }\n\n  closeFilter(key) {\n    this.setState({\n      [`${key}${Suffix.Filter}`]: false\n    });\n  }\n\n  toggleFilter(key) {\n    if (this.state[`${key}${Suffix.Filter}`] === true) {\n      this.closeFilter(key);\n    } else {\n      this.openFilter(key);\n    }\n  }\n\n  openFilterShortcut(key) {\n    this.setState({\n      [`${key}${Suffix.Shortcut}`]: true\n    });\n  }\n\n  closeFilterShortcut(key) {\n    this.setState({\n      [`${key}${Suffix.Shortcut}`]: false\n    });\n  }\n\n  toggleFilterShortcut(key) {\n    if (this.state[`${key}${Suffix.Shortcut}`] === true) {\n      this.closeFilterShortcut(key);\n    } else {\n      this.openFilterShortcut(key);\n    }\n  }\n\n  transformFilters(filters) {\n    const transformedActions = [];\n    getShortcutFilters(filters).forEach(filter => {\n      const {\n        key,\n        label,\n        disabled\n      } = filter;\n      transformedActions.push({\n        popoverContent: this.generateFilterMarkup(filter),\n        popoverOpen: Boolean(this.state[`${key}${Suffix.Shortcut}`]),\n        key,\n        content: label,\n        disabled,\n        onAction: () => this.toggleFilterShortcut(key)\n      });\n    });\n    return transformedActions;\n  }\n\n  generateFilterMarkup(filter) {\n    const i18n = this.props.i18n;\n    const removeCallback = this.getAppliedFilterRemoveHandler(filter.key);\n    const removeHandler = removeCallback == null ? undefined : () => {\n      removeCallback(filter.key);\n    };\n    return /*#__PURE__*/React$1.createElement(\"div\", {\n      ref: this.focusNode\n    }, /*#__PURE__*/React$1.createElement(Stack$1, {\n      vertical: true,\n      spacing: \"tight\"\n    }, filter.filter, /*#__PURE__*/React$1.createElement(Button$1, {\n      plain: true,\n      disabled: removeHandler == null,\n      onClick: removeHandler,\n      accessibilityLabel: i18n.translate('Polaris.Filters.clearLabel', {\n        filterName: filter.label\n      })\n    }, i18n.translate('Polaris.Filters.clear'))));\n  }\n\n}\n\nFiltersInner.contextType = ResourceListContext;\n\nfunction getShortcutFilters(filters) {\n  return filters.filter(filter => filter.shortcut === true);\n}\n\nfunction Filters(props) {\n  const i18n = useI18n();\n  const mediaQuery = useMediaQuery();\n  const features = useFeatures();\n  return /*#__PURE__*/React$1.createElement(FiltersInner, Object.assign({}, props, {\n    i18n: i18n,\n    mediaQuery: mediaQuery,\n    features: features\n  }));\n}\n\nexport { Filters };","map":{"version":3,"sources":["/Users/timi/Desktop/typescript-test/node_modules/@shopify/polaris/dist/esm/components/Filters/Filters.js"],"names":["Key","React$1","Component","createRef","useFeatures","useMediaQuery","useI18n","classNames","CancelSmallMinor","SearchMinor","ChevronUpMinor","ChevronDownMinor","focusFirstFocusableNode","Icon","Icon$1","Scrollable","Scrollable$1","KeypressListener","KeypressListener$1","WithinFilterContext","Badge","Badge$1","TextStyle","TextStyle$1","Button","Button$1","Stack","Stack$1","TextField","TextField$1","ScrollLock","ScrollLock$1","ResourceListContext","Collapsible","Collapsible$1","DisplayText","DisplayText$1","Tag","Tag$1","Focus","Focus$1","Sheet","Sheet$1","ConnectedFilterControl","ConnectedFilterControl$1","styles","Suffix","_ref","createElement","_ref2","source","FiltersInner","constructor","args","state","open","readyForFocus","moreFiltersButtonContainer","focusNode","closeFilters","setState","current","toggleFilters","openFilters","setReadyForFocus","newState","render","filters","queryValue","onQueryBlur","onQueryChange","onQueryFocus","focused","onClearAll","appliedFilters","onQueryClear","queryPlaceholder","children","disabled","helpText","hideTags","features","newDesignLanguage","i18n","mediaQuery","isNavigationCollapsed","props","resourceName","context","backdropMarkup","Fragment","className","Backdrop","onClick","filtersContentMarkup","map","filter","index","filterIsOpen","key","Filter","icon","FilterTriggerContainer","first","length","last","appliedFilterContent","getAppliedFilterContent","appliedFilterBadgeMarkup","AppliedFilterBadgeContainer","size","status","collapsibleID","buttonClassName","FilterTrigger","toggleFilter","id","type","FilterTriggerLabelContainer","FilterTriggerTitle","variation","undefined","label","FilterTriggerIcon","color","FilterNodeContainer","root","generateFilterMarkup","appliedFiltersCount","moreFiltersLabel","translate","count","rightActionMarkup","ref","filterResourceName","singular","plural","transformedFilters","transformFilters","filtersControlMarkup","rightPopoverableActions","rightAction","auxiliary","forceShowMorefiltersButton","placeholder","onChange","onBlur","onFocus","value","labelHidden","prefix","SearchIcon","clearButton","onClearButtonClick","filtersContainerHeaderClassname","FiltersContainerHeader","filtersDesktopHeaderMarkup","plain","accessibilityLabel","filtersMobileHeaderMarkup","primary","filtersDesktopFooterClassname","FiltersContainerFooter","filtersDesktopFooterMarkup","hasAppliedFilters","filtersMobileFooterMarkup","FiltersMobileContainerFooter","fullWidth","EmptyFooterState","tagsMarkup","TagsContainer","onRemove","filtersMobileContainerContentClassName","FiltersMobileContainerContent","filtersDesktopContainerContentClassName","FiltersDesktopContainerContent","filtersContainerMarkup","onClose","onEntered","onExit","shadow","FiltersContainer","helpTextMarkup","HelpText","Provider","Filters","keyCode","Escape","handler","filtersApplied","Boolean","queryApplied","find","getAppliedFilterRemoveHandler","openFilter","closeFilter","openFilterShortcut","Shortcut","closeFilterShortcut","toggleFilterShortcut","transformedActions","getShortcutFilters","forEach","push","popoverContent","popoverOpen","content","onAction","removeCallback","removeHandler","vertical","spacing","filterName","contextType","shortcut","Object","assign"],"mappings":"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","sourcesContent":["import { Key } from '../../types.js';\nimport React$1, { Component, createRef } from 'react';\nimport { useFeatures } from '../../utilities/features/hooks.js';\nimport { useMediaQuery } from '../../utilities/media-query/hooks.js';\nimport { useI18n } from '../../utilities/i18n/hooks.js';\nimport { classNames } from '../../utilities/css.js';\nimport { CancelSmallMinor, SearchMinor, ChevronUpMinor, ChevronDownMinor } from '@shopify/polaris-icons';\nimport { focusFirstFocusableNode } from '../../utilities/focus.js';\nimport { Icon as Icon$1 } from '../Icon/Icon.js';\nimport { Scrollable as Scrollable$1 } from '../Scrollable/Scrollable.js';\nimport { KeypressListener as KeypressListener$1 } from '../KeypressListener/KeypressListener.js';\nimport { WithinFilterContext } from '../../utilities/within-filter-context.js';\nimport { Badge as Badge$1 } from '../Badge/Badge.js';\nimport { TextStyle as TextStyle$1 } from '../TextStyle/TextStyle.js';\nimport { Button as Button$1 } from '../Button/Button.js';\nimport { Stack as Stack$1 } from '../Stack/Stack.js';\nimport { TextField as TextField$1 } from '../TextField/TextField.js';\nimport { ScrollLock as ScrollLock$1 } from '../ScrollLock/ScrollLock.js';\nimport { ResourceListContext } from '../../utilities/resource-list/context.js';\nimport { Collapsible as Collapsible$1 } from '../Collapsible/Collapsible.js';\nimport { DisplayText as DisplayText$1 } from '../DisplayText/DisplayText.js';\nimport { Tag as Tag$1 } from '../Tag/Tag.js';\nimport { Focus as Focus$1 } from '../Focus/Focus.js';\nimport { Sheet as Sheet$1 } from '../Sheet/Sheet.js';\nimport { ConnectedFilterControl as ConnectedFilterControl$1 } from './components/ConnectedFilterControl/ConnectedFilterControl.js';\nimport styles from './Filters.scss.js';\n\nvar Suffix;\n\n(function (Suffix) {\n  Suffix[\"Filter\"] = \"Filter\";\n  Suffix[\"Shortcut\"] = \"Shortcut\";\n})(Suffix || (Suffix = {}));\n\nvar _ref = /*#__PURE__*/React$1.createElement(ScrollLock$1, null);\n\nvar _ref2 = /*#__PURE__*/React$1.createElement(Icon$1, {\n  source: SearchMinor\n});\n\nclass FiltersInner extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      open: false,\n      readyForFocus: false\n    };\n    this.moreFiltersButtonContainer = /*#__PURE__*/createRef();\n    this.focusNode = /*#__PURE__*/createRef();\n\n    this.closeFilters = () => {\n      this.setState({\n        open: false\n      }, () => {\n        if (this.moreFiltersButtonContainer.current) {\n          focusFirstFocusableNode(this.moreFiltersButtonContainer.current, false);\n        }\n      });\n    };\n\n    this.toggleFilters = () => {\n      if (this.state.open === true) {\n        this.closeFilters();\n      } else {\n        this.openFilters();\n      }\n    };\n\n    this.setReadyForFocus = newState => () => {\n      this.setState({\n        readyForFocus: newState\n      });\n    };\n  }\n\n  render() {\n    const {\n      filters,\n      queryValue,\n      onQueryBlur,\n      onQueryChange,\n      onQueryFocus,\n      focused,\n      onClearAll,\n      appliedFilters,\n      onQueryClear,\n      queryPlaceholder,\n      children,\n      disabled = false,\n      helpText,\n      hideTags,\n      features: {\n        newDesignLanguage\n      },\n      i18n,\n      mediaQuery: {\n        isNavigationCollapsed\n      }\n    } = this.props;\n    const {\n      resourceName\n    } = this.context;\n    const {\n      open,\n      readyForFocus\n    } = this.state;\n    const backdropMarkup = open ? /*#__PURE__*/React$1.createElement(React$1.Fragment, null, _ref, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Backdrop,\n      onClick: this.closeFilters\n    })) : null;\n    const filtersContentMarkup = filters.map((filter, index) => {\n      const filterIsOpen = this.state[`${filter.key}${Suffix.Filter}`] === true;\n      const icon = filterIsOpen ? ChevronUpMinor : ChevronDownMinor;\n      const className = classNames(styles.FilterTriggerContainer, filterIsOpen && styles.open, index === 0 && styles.first, filters.length !== 1 && index === filters.length - 1 && styles.last);\n      const appliedFilterContent = this.getAppliedFilterContent(filter.key);\n      const appliedFilterBadgeMarkup = appliedFilterContent ? /*#__PURE__*/React$1.createElement(\"div\", {\n        className: styles.AppliedFilterBadgeContainer\n      }, /*#__PURE__*/React$1.createElement(Badge$1, {\n        size: \"small\",\n        status: \"new\"\n      }, appliedFilterContent)) : null;\n      const collapsibleID = `${filter.key}Collapsible`;\n      const buttonClassName = classNames(styles.FilterTrigger, newDesignLanguage && styles.newDesignLanguage);\n      return /*#__PURE__*/React$1.createElement(\"div\", {\n        key: filter.key,\n        className: className\n      }, /*#__PURE__*/React$1.createElement(\"button\", {\n        onClick: () => this.toggleFilter(filter.key),\n        className: buttonClassName,\n        id: `${filter.key}ToggleButton`,\n        type: \"button\",\n        \"aria-controls\": collapsibleID,\n        \"aria-expanded\": filterIsOpen\n      }, /*#__PURE__*/React$1.createElement(\"div\", {\n        className: styles.FilterTriggerLabelContainer\n      }, /*#__PURE__*/React$1.createElement(\"h2\", {\n        className: styles.FilterTriggerTitle\n      }, /*#__PURE__*/React$1.createElement(TextStyle$1, {\n        variation: this.props.disabled || filter.disabled ? 'subdued' : undefined\n      }, filter.label)), /*#__PURE__*/React$1.createElement(\"span\", {\n        className: styles.FilterTriggerIcon\n      }, /*#__PURE__*/React$1.createElement(Icon$1, {\n        source: icon,\n        color: \"inkLightest\"\n      }))), appliedFilterBadgeMarkup), /*#__PURE__*/React$1.createElement(Collapsible$1, {\n        id: collapsibleID,\n        open: filterIsOpen\n      }, /*#__PURE__*/React$1.createElement(\"div\", {\n        className: styles.FilterNodeContainer\n      }, /*#__PURE__*/React$1.createElement(Focus$1, {\n        disabled: !filterIsOpen || !readyForFocus || !open,\n        root: this.focusNode\n      }, this.generateFilterMarkup(filter)))));\n    });\n    const appliedFiltersCount = appliedFilters ? appliedFilters.length : 0;\n    const moreFiltersLabel = hideTags && appliedFiltersCount > 0 ? i18n.translate('Polaris.Filters.moreFiltersWithCount', {\n      count: appliedFiltersCount\n    }) : i18n.translate('Polaris.Filters.moreFilters');\n    const rightActionMarkup = /*#__PURE__*/React$1.createElement(\"div\", {\n      ref: this.moreFiltersButtonContainer\n    }, /*#__PURE__*/React$1.createElement(Button$1, {\n      onClick: this.toggleFilters,\n      disabled: disabled\n    }, moreFiltersLabel));\n    const filterResourceName = resourceName || {\n      singular: i18n.translate('Polaris.ResourceList.defaultItemSingular'),\n      plural: i18n.translate('Polaris.ResourceList.defaultItemPlural')\n    };\n    const transformedFilters = this.transformFilters(filters);\n    const filtersControlMarkup = /*#__PURE__*/React$1.createElement(ConnectedFilterControl$1, {\n      rightPopoverableActions: transformedFilters,\n      rightAction: rightActionMarkup,\n      auxiliary: children,\n      disabled: disabled,\n      forceShowMorefiltersButton: filters.length > transformedFilters.length\n    }, /*#__PURE__*/React$1.createElement(TextField$1, {\n      placeholder: queryPlaceholder || i18n.translate('Polaris.Filters.filter', {\n        resourceName: filterResourceName.plural\n      }),\n      onChange: onQueryChange,\n      onBlur: onQueryBlur,\n      onFocus: onQueryFocus,\n      value: queryValue,\n      focused: focused,\n      label: queryPlaceholder || i18n.translate('Polaris.Filters.filter', {\n        resourceName: filterResourceName.plural\n      }),\n      labelHidden: true,\n      prefix: /*#__PURE__*/React$1.createElement(\"span\", {\n        className: styles.SearchIcon\n      }, _ref2),\n      clearButton: true,\n      onClearButtonClick: onQueryClear,\n      disabled: disabled\n    }));\n    const filtersContainerHeaderClassname = classNames(styles.FiltersContainerHeader, newDesignLanguage && styles.newDesignLanguage);\n    const filtersDesktopHeaderMarkup = /*#__PURE__*/React$1.createElement(\"div\", {\n      className: filtersContainerHeaderClassname\n    }, /*#__PURE__*/React$1.createElement(DisplayText$1, {\n      size: \"small\"\n    }, moreFiltersLabel), /*#__PURE__*/React$1.createElement(Button$1, {\n      icon: CancelSmallMinor,\n      plain: true,\n      accessibilityLabel: i18n.translate('Polaris.Filters.cancel'),\n      onClick: this.closeFilters\n    }));\n    const filtersMobileHeaderMarkup = /*#__PURE__*/React$1.createElement(\"div\", {\n      className: filtersContainerHeaderClassname\n    }, /*#__PURE__*/React$1.createElement(Button$1, {\n      icon: CancelSmallMinor,\n      plain: true,\n      accessibilityLabel: i18n.translate('Polaris.Filters.cancel'),\n      onClick: this.closeFilters\n    }), /*#__PURE__*/React$1.createElement(DisplayText$1, {\n      size: \"small\"\n    }, moreFiltersLabel), /*#__PURE__*/React$1.createElement(Button$1, {\n      onClick: this.closeFilters,\n      primary: true\n    }, i18n.translate('Polaris.Filters.done')));\n    const filtersDesktopFooterClassname = classNames(styles.FiltersContainerFooter, newDesignLanguage && styles.newDesignLanguage);\n    const filtersDesktopFooterMarkup = /*#__PURE__*/React$1.createElement(\"div\", {\n      className: filtersDesktopFooterClassname\n    }, /*#__PURE__*/React$1.createElement(Button$1, {\n      onClick: onClearAll,\n      disabled: !this.hasAppliedFilters()\n    }, i18n.translate('Polaris.Filters.clearAllFilters')), /*#__PURE__*/React$1.createElement(Button$1, {\n      onClick: this.closeFilters,\n      primary: true\n    }, i18n.translate('Polaris.Filters.done')));\n    const filtersMobileFooterMarkup = /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.FiltersMobileContainerFooter\n    }, this.hasAppliedFilters() ? /*#__PURE__*/React$1.createElement(Button$1, {\n      onClick: onClearAll,\n      fullWidth: true\n    }, i18n.translate('Polaris.Filters.clearAllFilters')) : /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.EmptyFooterState\n    }, /*#__PURE__*/React$1.createElement(TextStyle$1, {\n      variation: \"subdued\"\n    }, /*#__PURE__*/React$1.createElement(\"p\", null, i18n.translate('Polaris.Filters.noFiltersApplied')))));\n    const tagsMarkup = !hideTags && appliedFilters && appliedFilters.length ? /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.TagsContainer\n    }, appliedFilters.map(filter => {\n      return /*#__PURE__*/React$1.createElement(Tag$1, {\n        key: filter.key,\n        onRemove: () => {\n          filter.onRemove(filter.key);\n        },\n        disabled: disabled\n      }, filter.label);\n    })) : null;\n    const filtersMobileContainerContentClassName = classNames(styles.FiltersMobileContainerContent, newDesignLanguage && styles.newDesignLanguage);\n    const filtersDesktopContainerContentClassName = classNames(styles.FiltersDesktopContainerContent, newDesignLanguage && styles.newDesignLanguage);\n    const filtersContainerMarkup = isNavigationCollapsed ? /*#__PURE__*/React$1.createElement(Sheet$1, {\n      open: open,\n      onClose: this.closeFilters,\n      onEntered: this.setReadyForFocus(true),\n      onExit: this.setReadyForFocus(false)\n    }, filtersMobileHeaderMarkup, /*#__PURE__*/React$1.createElement(Scrollable$1, {\n      className: filtersMobileContainerContentClassName,\n      shadow: true\n    }, filtersContentMarkup, filtersMobileFooterMarkup)) : /*#__PURE__*/React$1.createElement(Sheet$1, {\n      open: open,\n      onClose: this.closeFilters,\n      onEntered: this.setReadyForFocus(true),\n      onExit: this.setReadyForFocus(false)\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.FiltersContainer\n    }, filtersDesktopHeaderMarkup, /*#__PURE__*/React$1.createElement(Scrollable$1, {\n      className: filtersDesktopContainerContentClassName,\n      shadow: true\n    }, filtersContentMarkup), filtersDesktopFooterMarkup));\n    const helpTextMarkup = helpText ? /*#__PURE__*/React$1.createElement(\"div\", {\n      id: \"FiltersHelpText\",\n      className: styles.HelpText\n    }, /*#__PURE__*/React$1.createElement(TextStyle$1, {\n      variation: \"subdued\"\n    }, helpText)) : null;\n    return /*#__PURE__*/React$1.createElement(WithinFilterContext.Provider, {\n      value: true\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Filters\n    }, filtersControlMarkup, filtersContainerMarkup, tagsMarkup, helpTextMarkup, backdropMarkup, /*#__PURE__*/React$1.createElement(KeypressListener$1, {\n      keyCode: Key.Escape,\n      handler: this.closeFilters\n    })));\n  }\n\n  hasAppliedFilters() {\n    const {\n      appliedFilters,\n      queryValue\n    } = this.props;\n    const filtersApplied = Boolean(appliedFilters && appliedFilters.length > 0);\n    const queryApplied = Boolean(queryValue && queryValue !== '');\n    return filtersApplied || queryApplied;\n  }\n\n  getAppliedFilterContent(key) {\n    const {\n      appliedFilters\n    } = this.props;\n\n    if (!appliedFilters) {\n      return undefined;\n    }\n\n    const filter = appliedFilters.find(filter => filter.key === key);\n    return filter == null ? undefined : filter.label;\n  }\n\n  getAppliedFilterRemoveHandler(key) {\n    const {\n      appliedFilters\n    } = this.props;\n\n    if (!appliedFilters) {\n      return undefined;\n    }\n\n    const filter = appliedFilters.find(filter => filter.key === key);\n    return filter == null ? undefined : filter.onRemove;\n  }\n\n  openFilters() {\n    this.setState({\n      open: true\n    });\n  }\n\n  openFilter(key) {\n    this.setState({\n      [`${key}${Suffix.Filter}`]: true\n    });\n  }\n\n  closeFilter(key) {\n    this.setState({\n      [`${key}${Suffix.Filter}`]: false\n    });\n  }\n\n  toggleFilter(key) {\n    if (this.state[`${key}${Suffix.Filter}`] === true) {\n      this.closeFilter(key);\n    } else {\n      this.openFilter(key);\n    }\n  }\n\n  openFilterShortcut(key) {\n    this.setState({\n      [`${key}${Suffix.Shortcut}`]: true\n    });\n  }\n\n  closeFilterShortcut(key) {\n    this.setState({\n      [`${key}${Suffix.Shortcut}`]: false\n    });\n  }\n\n  toggleFilterShortcut(key) {\n    if (this.state[`${key}${Suffix.Shortcut}`] === true) {\n      this.closeFilterShortcut(key);\n    } else {\n      this.openFilterShortcut(key);\n    }\n  }\n\n  transformFilters(filters) {\n    const transformedActions = [];\n    getShortcutFilters(filters).forEach(filter => {\n      const {\n        key,\n        label,\n        disabled\n      } = filter;\n      transformedActions.push({\n        popoverContent: this.generateFilterMarkup(filter),\n        popoverOpen: Boolean(this.state[`${key}${Suffix.Shortcut}`]),\n        key,\n        content: label,\n        disabled,\n        onAction: () => this.toggleFilterShortcut(key)\n      });\n    });\n    return transformedActions;\n  }\n\n  generateFilterMarkup(filter) {\n    const i18n = this.props.i18n;\n    const removeCallback = this.getAppliedFilterRemoveHandler(filter.key);\n    const removeHandler = removeCallback == null ? undefined : () => {\n      removeCallback(filter.key);\n    };\n    return /*#__PURE__*/React$1.createElement(\"div\", {\n      ref: this.focusNode\n    }, /*#__PURE__*/React$1.createElement(Stack$1, {\n      vertical: true,\n      spacing: \"tight\"\n    }, filter.filter, /*#__PURE__*/React$1.createElement(Button$1, {\n      plain: true,\n      disabled: removeHandler == null,\n      onClick: removeHandler,\n      accessibilityLabel: i18n.translate('Polaris.Filters.clearLabel', {\n        filterName: filter.label\n      })\n    }, i18n.translate('Polaris.Filters.clear'))));\n  }\n\n}\n\nFiltersInner.contextType = ResourceListContext;\n\nfunction getShortcutFilters(filters) {\n  return filters.filter(filter => filter.shortcut === true);\n}\n\nfunction Filters(props) {\n  const i18n = useI18n();\n  const mediaQuery = useMediaQuery();\n  const features = useFeatures();\n  return /*#__PURE__*/React$1.createElement(FiltersInner, Object.assign({}, props, {\n    i18n: i18n,\n    mediaQuery: mediaQuery,\n    features: features\n  }));\n}\n\nexport { Filters };\n"]},"metadata":{},"sourceType":"module"}