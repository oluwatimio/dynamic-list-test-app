{"ast":null,"code":"import { Key } from '../../../../types.js';\nimport { objectWithoutProperties as _objectWithoutProperties } from '../../../../_virtual/_rollupPluginBabelHelpers.js';\nimport React$1, { useContext, useState, useEffect, useCallback } from 'react';\nimport { useMediaQuery } from '../../../../utilities/media-query/hooks.js';\nimport { useI18n } from '../../../../utilities/i18n/hooks.js';\nimport { classNames } from '../../../../utilities/css.js';\nimport { Icon as Icon$1 } from '../../../Icon/Icon.js';\nimport { UnstyledLink as UnstyledLink$1 } from '../../../UnstyledLink/UnstyledLink.js';\nimport { Badge as Badge$1 } from '../../../Badge/Badge.js';\nimport { Indicator as Indicator$1 } from '../../../Indicator/Indicator.js';\nimport { NavigationContext } from '../../context.js';\nimport styles from '../../Navigation.scss.js';\nimport { Secondary as Secondary$1 } from './components/Secondary/Secondary.js';\nvar MatchState;\n\n(function (MatchState) {\n  MatchState[MatchState[\"MatchForced\"] = 0] = \"MatchForced\";\n  MatchState[MatchState[\"MatchUrl\"] = 1] = \"MatchUrl\";\n  MatchState[MatchState[\"MatchPaths\"] = 2] = \"MatchPaths\";\n  MatchState[MatchState[\"Excluded\"] = 3] = \"Excluded\";\n  MatchState[MatchState[\"NoMatch\"] = 4] = \"NoMatch\";\n})(MatchState || (MatchState = {}));\n\nvar _ref = /*#__PURE__*/React$1.createElement(Indicator$1, {\n  pulse: true\n});\n\nfunction Item({\n  url,\n  icon,\n  label,\n  subNavigationItems = [],\n  secondaryAction,\n  disabled,\n  onClick,\n  accessibilityLabel,\n  selected: selectedOverride,\n  badge,\n  new: isNew,\n  matches,\n  exactMatch,\n  matchPaths,\n  excludePaths\n}) {\n  const i18n = useI18n();\n  const {\n    isNavigationCollapsed\n  } = useMediaQuery();\n  const {\n    location,\n    onNavigationDismiss\n  } = useContext(NavigationContext);\n  const [expanded, setExpanded] = useState(false);\n  const [keyFocused, setKeyFocused] = useState(false);\n  useEffect(() => {\n    if (!isNavigationCollapsed && expanded) {\n      setExpanded(false);\n    }\n  }, [expanded, isNavigationCollapsed]);\n  const handleKeyUp = useCallback(event => {\n    if (event.keyCode === Key.Tab) {\n      !keyFocused && setKeyFocused(true);\n    }\n  }, [keyFocused]);\n  const handleBlur = useCallback(() => {\n    keyFocused && setKeyFocused(false);\n  }, [keyFocused]);\n  const tabIndex = disabled ? -1 : 0;\n  const hasNewChild = subNavigationItems.filter(subNavigationItem => subNavigationItem.new).length > 0;\n  const indicatorMarkup = hasNewChild ? /*#__PURE__*/React$1.createElement(\"span\", {\n    className: styles.Indicator\n  }, _ref) : null;\n  const iconMarkup = icon ? /*#__PURE__*/React$1.createElement(\"div\", {\n    className: styles.Icon\n  }, /*#__PURE__*/React$1.createElement(Icon$1, {\n    source: icon\n  })) : null;\n  let badgeMarkup = null;\n\n  if (isNew) {\n    badgeMarkup = /*#__PURE__*/React$1.createElement(Badge$1, {\n      status: \"new\",\n      size: \"small\"\n    }, i18n.translate('Polaris.Badge.STATUS_LABELS.new'));\n  } else if (typeof badge === 'string') {\n    badgeMarkup = /*#__PURE__*/React$1.createElement(Badge$1, {\n      status: \"new\",\n      size: \"small\"\n    }, badge);\n  } else {\n    badgeMarkup = badge;\n  }\n\n  const wrappedBadgeMarkup = badgeMarkup == null ? null : /*#__PURE__*/React$1.createElement(\"div\", {\n    className: styles.Badge\n  }, badgeMarkup);\n  const itemContentMarkup = /*#__PURE__*/React$1.createElement(React$1.Fragment, null, iconMarkup, /*#__PURE__*/React$1.createElement(\"span\", {\n    className: styles.Text\n  }, label, indicatorMarkup), wrappedBadgeMarkup);\n\n  if (url == null) {\n    const _className = classNames(styles.Item, disabled && styles['Item-disabled'], keyFocused && styles.keyFocused);\n\n    return /*#__PURE__*/React$1.createElement(\"li\", {\n      className: styles.ListItem\n    }, /*#__PURE__*/React$1.createElement(\"button\", {\n      type: \"button\",\n      className: _className,\n      disabled: disabled,\n      \"aria-disabled\": disabled,\n      \"aria-label\": accessibilityLabel,\n      onClick: getClickHandler(onClick),\n      onKeyUp: handleKeyUp,\n      onBlur: handleBlur\n    }, itemContentMarkup));\n  }\n\n  const secondaryActionMarkup = secondaryAction && /*#__PURE__*/React$1.createElement(UnstyledLink$1, {\n    external: true,\n    url: secondaryAction.url,\n    className: styles.SecondaryAction,\n    tabIndex: tabIndex,\n    \"aria-disabled\": disabled,\n    \"aria-label\": secondaryAction.accessibilityLabel\n  }, /*#__PURE__*/React$1.createElement(Icon$1, {\n    source: secondaryAction.icon\n  }));\n  const matchState = matchStateForItem({\n    url,\n    matches,\n    exactMatch,\n    matchPaths,\n    excludePaths\n  }, location);\n  const matchingSubNavigationItems = subNavigationItems.filter(item => {\n    const subMatchState = matchStateForItem(item, location);\n    return subMatchState === MatchState.MatchForced || subMatchState === MatchState.MatchUrl || subMatchState === MatchState.MatchPaths;\n  });\n  const childIsActive = matchingSubNavigationItems.length > 0;\n  const selected = selectedOverride == null ? matchState === MatchState.MatchForced || matchState === MatchState.MatchUrl || matchState === MatchState.MatchPaths : selectedOverride;\n  const showExpanded = selected || expanded || childIsActive;\n  const itemClassName = classNames(styles.Item, disabled && styles['Item-disabled'], selected && subNavigationItems.length === 0 && styles['Item-selected'], showExpanded && styles.subNavigationActive, keyFocused && styles.keyFocused);\n  let secondaryNavigationMarkup = null;\n\n  if (subNavigationItems.length > 0 && showExpanded) {\n    const longestMatch = matchingSubNavigationItems.sort(({\n      url: firstUrl\n    }, {\n      url: secondUrl\n    }) => secondUrl.length - firstUrl.length)[0];\n    const SecondaryNavigationClassName = classNames(styles.SecondaryNavigation, !icon && styles['SecondaryNavigation-noIcon']);\n    secondaryNavigationMarkup = /*#__PURE__*/React$1.createElement(\"div\", {\n      className: SecondaryNavigationClassName\n    }, /*#__PURE__*/React$1.createElement(Secondary$1, {\n      expanded: showExpanded\n    }, subNavigationItems.map(item => {\n      const {\n        label\n      } = item,\n            rest = _objectWithoutProperties(item, [\"label\"]);\n\n      return /*#__PURE__*/React$1.createElement(Item, Object.assign({}, rest, {\n        key: label,\n        label: label,\n        matches: item === longestMatch,\n        onClick: onNavigationDismiss\n      }));\n    })));\n  }\n\n  const className = classNames(styles.ListItem, secondaryAction && styles['ListItem-hasAction']);\n  return /*#__PURE__*/React$1.createElement(\"li\", {\n    className: className\n  }, /*#__PURE__*/React$1.createElement(\"div\", {\n    className: styles.ItemWrapper\n  }, /*#__PURE__*/React$1.createElement(UnstyledLink$1, {\n    url: url,\n    className: itemClassName,\n    tabIndex: tabIndex,\n    \"aria-disabled\": disabled,\n    \"aria-label\": accessibilityLabel,\n    onClick: getClickHandler(onClick),\n    onKeyUp: handleKeyUp,\n    onBlur: handleBlur\n  }, itemContentMarkup), secondaryActionMarkup), secondaryNavigationMarkup);\n\n  function getClickHandler(onClick) {\n    return event => {\n      const {\n        currentTarget\n      } = event;\n\n      if (currentTarget.getAttribute('href') === location) {\n        event.preventDefault();\n      }\n\n      if (subNavigationItems && subNavigationItems.length > 0 && isNavigationCollapsed) {\n        event.preventDefault();\n        setExpanded(!expanded);\n      } else if (onNavigationDismiss) {\n        onNavigationDismiss();\n\n        if (onClick && onClick !== onNavigationDismiss) {\n          onClick();\n        }\n\n        return;\n      }\n\n      if (onClick) {\n        onClick();\n      }\n    };\n  }\n}\n\nfunction isNavigationItemActive(navigationItem, currentPath) {\n  const matchState = matchStateForItem(navigationItem, currentPath);\n  const matchingSubNavigationItems = navigationItem.subNavigationItems && navigationItem.subNavigationItems.filter(item => {\n    const subMatchState = matchStateForItem(item, currentPath);\n    return subMatchState === MatchState.MatchForced || subMatchState === MatchState.MatchUrl || subMatchState === MatchState.MatchPaths;\n  });\n  const childIsActive = matchingSubNavigationItems && matchingSubNavigationItems.length > 0;\n  const selected = matchState === MatchState.MatchForced || matchState === MatchState.MatchUrl || matchState === MatchState.MatchPaths;\n  return selected || childIsActive;\n}\n\nfunction normalizePathname(pathname) {\n  const barePathname = pathname.split('?')[0].split('#')[0];\n  return barePathname.endsWith('/') ? barePathname : `${barePathname}/`;\n}\n\nfunction safeEqual(location, path) {\n  return normalizePathname(location) === normalizePathname(path);\n}\n\nfunction safeStartsWith(location, path) {\n  return normalizePathname(location).startsWith(normalizePathname(path));\n}\n\nfunction matchStateForItem({\n  url,\n  matches,\n  exactMatch,\n  matchPaths,\n  excludePaths\n}, location) {\n  if (url == null) {\n    return MatchState.NoMatch;\n  }\n\n  if (matches) {\n    return MatchState.MatchForced;\n  }\n\n  if (matches === false || excludePaths && excludePaths.some(path => safeStartsWith(location, path))) {\n    return MatchState.Excluded;\n  }\n\n  if (matchPaths && matchPaths.some(path => safeStartsWith(location, path))) {\n    return MatchState.MatchPaths;\n  }\n\n  const matchesUrl = exactMatch ? safeEqual(location, url) : safeStartsWith(location, url);\n  return matchesUrl ? MatchState.MatchUrl : MatchState.NoMatch;\n}\n\nexport { Item, isNavigationItemActive };","map":{"version":3,"sources":["/Users/timi/Desktop/typescript-test/node_modules/@shopify/polaris/dist/esm/components/Navigation/components/Item/Item.js"],"names":["Key","objectWithoutProperties","_objectWithoutProperties","React$1","useContext","useState","useEffect","useCallback","useMediaQuery","useI18n","classNames","Icon","Icon$1","UnstyledLink","UnstyledLink$1","Badge","Badge$1","Indicator","Indicator$1","NavigationContext","styles","Secondary","Secondary$1","MatchState","_ref","createElement","pulse","Item","url","icon","label","subNavigationItems","secondaryAction","disabled","onClick","accessibilityLabel","selected","selectedOverride","badge","new","isNew","matches","exactMatch","matchPaths","excludePaths","i18n","isNavigationCollapsed","location","onNavigationDismiss","expanded","setExpanded","keyFocused","setKeyFocused","handleKeyUp","event","keyCode","Tab","handleBlur","tabIndex","hasNewChild","filter","subNavigationItem","length","indicatorMarkup","className","iconMarkup","source","badgeMarkup","status","size","translate","wrappedBadgeMarkup","itemContentMarkup","Fragment","Text","_className","ListItem","type","getClickHandler","onKeyUp","onBlur","secondaryActionMarkup","external","SecondaryAction","matchState","matchStateForItem","matchingSubNavigationItems","item","subMatchState","MatchForced","MatchUrl","MatchPaths","childIsActive","showExpanded","itemClassName","subNavigationActive","secondaryNavigationMarkup","longestMatch","sort","firstUrl","secondUrl","SecondaryNavigationClassName","SecondaryNavigation","map","rest","Object","assign","key","ItemWrapper","currentTarget","getAttribute","preventDefault","isNavigationItemActive","navigationItem","currentPath","normalizePathname","pathname","barePathname","split","endsWith","safeEqual","path","safeStartsWith","startsWith","NoMatch","some","Excluded","matchesUrl"],"mappings":"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","sourcesContent":["import { Key } from '../../../../types.js';\nimport { objectWithoutProperties as _objectWithoutProperties } from '../../../../_virtual/_rollupPluginBabelHelpers.js';\nimport React$1, { useContext, useState, useEffect, useCallback } from 'react';\nimport { useMediaQuery } from '../../../../utilities/media-query/hooks.js';\nimport { useI18n } from '../../../../utilities/i18n/hooks.js';\nimport { classNames } from '../../../../utilities/css.js';\nimport { Icon as Icon$1 } from '../../../Icon/Icon.js';\nimport { UnstyledLink as UnstyledLink$1 } from '../../../UnstyledLink/UnstyledLink.js';\nimport { Badge as Badge$1 } from '../../../Badge/Badge.js';\nimport { Indicator as Indicator$1 } from '../../../Indicator/Indicator.js';\nimport { NavigationContext } from '../../context.js';\nimport styles from '../../Navigation.scss.js';\nimport { Secondary as Secondary$1 } from './components/Secondary/Secondary.js';\n\nvar MatchState;\n\n(function (MatchState) {\n  MatchState[MatchState[\"MatchForced\"] = 0] = \"MatchForced\";\n  MatchState[MatchState[\"MatchUrl\"] = 1] = \"MatchUrl\";\n  MatchState[MatchState[\"MatchPaths\"] = 2] = \"MatchPaths\";\n  MatchState[MatchState[\"Excluded\"] = 3] = \"Excluded\";\n  MatchState[MatchState[\"NoMatch\"] = 4] = \"NoMatch\";\n})(MatchState || (MatchState = {}));\n\nvar _ref = /*#__PURE__*/React$1.createElement(Indicator$1, {\n  pulse: true\n});\n\nfunction Item({\n  url,\n  icon,\n  label,\n  subNavigationItems = [],\n  secondaryAction,\n  disabled,\n  onClick,\n  accessibilityLabel,\n  selected: selectedOverride,\n  badge,\n  new: isNew,\n  matches,\n  exactMatch,\n  matchPaths,\n  excludePaths\n}) {\n  const i18n = useI18n();\n  const {\n    isNavigationCollapsed\n  } = useMediaQuery();\n  const {\n    location,\n    onNavigationDismiss\n  } = useContext(NavigationContext);\n  const [expanded, setExpanded] = useState(false);\n  const [keyFocused, setKeyFocused] = useState(false);\n  useEffect(() => {\n    if (!isNavigationCollapsed && expanded) {\n      setExpanded(false);\n    }\n  }, [expanded, isNavigationCollapsed]);\n  const handleKeyUp = useCallback(event => {\n    if (event.keyCode === Key.Tab) {\n      !keyFocused && setKeyFocused(true);\n    }\n  }, [keyFocused]);\n  const handleBlur = useCallback(() => {\n    keyFocused && setKeyFocused(false);\n  }, [keyFocused]);\n  const tabIndex = disabled ? -1 : 0;\n  const hasNewChild = subNavigationItems.filter(subNavigationItem => subNavigationItem.new).length > 0;\n  const indicatorMarkup = hasNewChild ? /*#__PURE__*/React$1.createElement(\"span\", {\n    className: styles.Indicator\n  }, _ref) : null;\n  const iconMarkup = icon ? /*#__PURE__*/React$1.createElement(\"div\", {\n    className: styles.Icon\n  }, /*#__PURE__*/React$1.createElement(Icon$1, {\n    source: icon\n  })) : null;\n  let badgeMarkup = null;\n\n  if (isNew) {\n    badgeMarkup = /*#__PURE__*/React$1.createElement(Badge$1, {\n      status: \"new\",\n      size: \"small\"\n    }, i18n.translate('Polaris.Badge.STATUS_LABELS.new'));\n  } else if (typeof badge === 'string') {\n    badgeMarkup = /*#__PURE__*/React$1.createElement(Badge$1, {\n      status: \"new\",\n      size: \"small\"\n    }, badge);\n  } else {\n    badgeMarkup = badge;\n  }\n\n  const wrappedBadgeMarkup = badgeMarkup == null ? null : /*#__PURE__*/React$1.createElement(\"div\", {\n    className: styles.Badge\n  }, badgeMarkup);\n  const itemContentMarkup = /*#__PURE__*/React$1.createElement(React$1.Fragment, null, iconMarkup, /*#__PURE__*/React$1.createElement(\"span\", {\n    className: styles.Text\n  }, label, indicatorMarkup), wrappedBadgeMarkup);\n\n  if (url == null) {\n    const _className = classNames(styles.Item, disabled && styles['Item-disabled'], keyFocused && styles.keyFocused);\n\n    return /*#__PURE__*/React$1.createElement(\"li\", {\n      className: styles.ListItem\n    }, /*#__PURE__*/React$1.createElement(\"button\", {\n      type: \"button\",\n      className: _className,\n      disabled: disabled,\n      \"aria-disabled\": disabled,\n      \"aria-label\": accessibilityLabel,\n      onClick: getClickHandler(onClick),\n      onKeyUp: handleKeyUp,\n      onBlur: handleBlur\n    }, itemContentMarkup));\n  }\n\n  const secondaryActionMarkup = secondaryAction && /*#__PURE__*/React$1.createElement(UnstyledLink$1, {\n    external: true,\n    url: secondaryAction.url,\n    className: styles.SecondaryAction,\n    tabIndex: tabIndex,\n    \"aria-disabled\": disabled,\n    \"aria-label\": secondaryAction.accessibilityLabel\n  }, /*#__PURE__*/React$1.createElement(Icon$1, {\n    source: secondaryAction.icon\n  }));\n  const matchState = matchStateForItem({\n    url,\n    matches,\n    exactMatch,\n    matchPaths,\n    excludePaths\n  }, location);\n  const matchingSubNavigationItems = subNavigationItems.filter(item => {\n    const subMatchState = matchStateForItem(item, location);\n    return subMatchState === MatchState.MatchForced || subMatchState === MatchState.MatchUrl || subMatchState === MatchState.MatchPaths;\n  });\n  const childIsActive = matchingSubNavigationItems.length > 0;\n  const selected = selectedOverride == null ? matchState === MatchState.MatchForced || matchState === MatchState.MatchUrl || matchState === MatchState.MatchPaths : selectedOverride;\n  const showExpanded = selected || expanded || childIsActive;\n  const itemClassName = classNames(styles.Item, disabled && styles['Item-disabled'], selected && subNavigationItems.length === 0 && styles['Item-selected'], showExpanded && styles.subNavigationActive, keyFocused && styles.keyFocused);\n  let secondaryNavigationMarkup = null;\n\n  if (subNavigationItems.length > 0 && showExpanded) {\n    const longestMatch = matchingSubNavigationItems.sort(({\n      url: firstUrl\n    }, {\n      url: secondUrl\n    }) => secondUrl.length - firstUrl.length)[0];\n    const SecondaryNavigationClassName = classNames(styles.SecondaryNavigation, !icon && styles['SecondaryNavigation-noIcon']);\n    secondaryNavigationMarkup = /*#__PURE__*/React$1.createElement(\"div\", {\n      className: SecondaryNavigationClassName\n    }, /*#__PURE__*/React$1.createElement(Secondary$1, {\n      expanded: showExpanded\n    }, subNavigationItems.map(item => {\n      const {\n        label\n      } = item,\n            rest = _objectWithoutProperties(item, [\"label\"]);\n\n      return /*#__PURE__*/React$1.createElement(Item, Object.assign({}, rest, {\n        key: label,\n        label: label,\n        matches: item === longestMatch,\n        onClick: onNavigationDismiss\n      }));\n    })));\n  }\n\n  const className = classNames(styles.ListItem, secondaryAction && styles['ListItem-hasAction']);\n  return /*#__PURE__*/React$1.createElement(\"li\", {\n    className: className\n  }, /*#__PURE__*/React$1.createElement(\"div\", {\n    className: styles.ItemWrapper\n  }, /*#__PURE__*/React$1.createElement(UnstyledLink$1, {\n    url: url,\n    className: itemClassName,\n    tabIndex: tabIndex,\n    \"aria-disabled\": disabled,\n    \"aria-label\": accessibilityLabel,\n    onClick: getClickHandler(onClick),\n    onKeyUp: handleKeyUp,\n    onBlur: handleBlur\n  }, itemContentMarkup), secondaryActionMarkup), secondaryNavigationMarkup);\n\n  function getClickHandler(onClick) {\n    return event => {\n      const {\n        currentTarget\n      } = event;\n\n      if (currentTarget.getAttribute('href') === location) {\n        event.preventDefault();\n      }\n\n      if (subNavigationItems && subNavigationItems.length > 0 && isNavigationCollapsed) {\n        event.preventDefault();\n        setExpanded(!expanded);\n      } else if (onNavigationDismiss) {\n        onNavigationDismiss();\n\n        if (onClick && onClick !== onNavigationDismiss) {\n          onClick();\n        }\n\n        return;\n      }\n\n      if (onClick) {\n        onClick();\n      }\n    };\n  }\n}\nfunction isNavigationItemActive(navigationItem, currentPath) {\n  const matchState = matchStateForItem(navigationItem, currentPath);\n  const matchingSubNavigationItems = navigationItem.subNavigationItems && navigationItem.subNavigationItems.filter(item => {\n    const subMatchState = matchStateForItem(item, currentPath);\n    return subMatchState === MatchState.MatchForced || subMatchState === MatchState.MatchUrl || subMatchState === MatchState.MatchPaths;\n  });\n  const childIsActive = matchingSubNavigationItems && matchingSubNavigationItems.length > 0;\n  const selected = matchState === MatchState.MatchForced || matchState === MatchState.MatchUrl || matchState === MatchState.MatchPaths;\n  return selected || childIsActive;\n}\n\nfunction normalizePathname(pathname) {\n  const barePathname = pathname.split('?')[0].split('#')[0];\n  return barePathname.endsWith('/') ? barePathname : `${barePathname}/`;\n}\n\nfunction safeEqual(location, path) {\n  return normalizePathname(location) === normalizePathname(path);\n}\n\nfunction safeStartsWith(location, path) {\n  return normalizePathname(location).startsWith(normalizePathname(path));\n}\n\nfunction matchStateForItem({\n  url,\n  matches,\n  exactMatch,\n  matchPaths,\n  excludePaths\n}, location) {\n  if (url == null) {\n    return MatchState.NoMatch;\n  }\n\n  if (matches) {\n    return MatchState.MatchForced;\n  }\n\n  if (matches === false || excludePaths && excludePaths.some(path => safeStartsWith(location, path))) {\n    return MatchState.Excluded;\n  }\n\n  if (matchPaths && matchPaths.some(path => safeStartsWith(location, path))) {\n    return MatchState.MatchPaths;\n  }\n\n  const matchesUrl = exactMatch ? safeEqual(location, url) : safeStartsWith(location, url);\n  return matchesUrl ? MatchState.MatchUrl : MatchState.NoMatch;\n}\n\nexport { Item, isNavigationItemActive };\n"]},"metadata":{},"sourceType":"module"}